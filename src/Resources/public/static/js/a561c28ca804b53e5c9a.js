(this["webpackJsonpPlugintwint-payment"]=this["webpackJsonpPlugintwint-payment"]||[]).push([[1],{DobE:function(t,e,s){"use strict";s.r(e);var n=Shopware.Mixin;e.default={template:'{% block twint_payment %}\n    <sw-page class="twint-payment">\n        {% block twint_payment_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="regular-chevron-right-xs" small></sw-icon>\n                    {{ $tc(\'twint.title\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block twint_payment_actions %}\n            <template #smart-bar-actions>\n                {% block twint_payment_settings_actions_test %}\n                    <sw-button-process @click="onTest"\n                                       :isLoading="isTesting"\n                                       :processSuccess="isTestSuccessful"\n                                       :disabled="isLoading">\n                        {{ $tc(\'twint.settings.test\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n                {% block twint_payment_settings_actions_save %}\n                    <sw-button-process\n                            class="sw-settings-login-registration__save-action"\n                            :isLoading="isLoading"\n                            :processSuccess="isSaveSuccessful"\n                            :disabled="isLoading || isTesting || !isTestSuccessful"\n                            variant="primary"\n                            @process-finish="saveFinish"\n                            @click="onSave">\n                        {{ $tc(\'twint.settings.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block twint_payment_settings_content %}\n            <template #content>\n                <sw-card-view>\n                    <sw-system-config\n                            class="twint-config__wrapper"\n                            ref="systemConfig"\n                            sales-channel-switchable\n                            inherit\n                            domain="TwintPayment.settings"\n                            @config-changed="onChanged"\n                    >\n                    </sw-system-config>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n',inject:["TwintPaymentSettingsService"],mixins:[n.getByName("notification"),n.getByName("sw-inline-snippet")],data:function(){return{isLoading:!1,isTesting:!1,isSaveSuccessful:!1,isTestSuccessful:!1}},metaInfo:function(){return{title:this.$createTitle()}},methods:{onChanged:function(t){this.isTestSuccessful=!1,this.isSaveSuccessful=!1},saveFinish:function(){this.isSaveSuccessful=!1},testFinish:function(){this.isTestSuccessful=!1},getConfigValue:function(t){var e=this.$refs.systemConfig.actualConfigData,s=e.null,n=this.$refs.systemConfig.currentSalesChannelId;return null===n?e.null["TwintPayment.settings.".concat(t)]:e[n]["TwintPayment.settings.".concat(t)]||s["TwintPayment.settings.".concat(t)]},onSave:function(){var t=this;this.checkRequiredFields()&&(this.isSaveSuccessful=!1,this.isLoading=!0,this.$refs.systemConfig.saveAll().then((function(e){t.isSaveSuccessful=!0})).finally((function(){t.isLoading=!1})))},isValidUUIDv4:function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},checkRequiredFields:function(){var t=!0,e=this.getConfigValue("merchantId"),s=this.getConfigValue("certificate");return e&&""!==e.trim()||(this.createNotificationError({title:this.$tc("twint.settings.titleError"),message:this.$tc("twint.settings.messageErrorRequiredMerchantID")}),t=!1),t&&!this.isValidUUIDv4(e)&&(this.createNotificationError({title:this.$tc("twint.settings.titleError"),message:this.$tc("twint.settings.messageErrorInvalidMerchantID")}),t=!1),s||(this.createNotificationError({title:this.$tc("twint.settings.titleError"),message:this.$tc("twint.settings.messageErrorRequiredCertificate")}),t=!1),t},onTest:function(){var t=this;if(this.checkRequiredFields()){this.isTesting=!0,this.isTestSuccessful=!1;var e={};this.$refs.systemConfig.config.forEach((function(s){e={cert:t.getConfigValue("certificate"),merchantId:t.getConfigValue("merchantId"),testMode:t.getConfigValue("testMode")}})),this.TwintPaymentSettingsService.validateCredential(e).then((function(e){var s;null!==(s=e.success)&&void 0!==s&&s?(t.createNotificationSuccess({title:t.$tc("twint.settings.titleSuccess"),message:t.$tc("twint.settings.messageTestSuccess")}),t.isTestSuccessful=!0):t.createNotificationError({title:t.$tc("twint.settings.titleError"),message:t.$tc("twint.settings.messageTestError")})})).finally((function(e){t.isTesting=!1}))}}}}}}]);
//# sourceMappingURL=a561c28ca804b53e5c9a.js.map
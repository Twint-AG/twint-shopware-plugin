!function(e){function t(t){for(var n,r,o=t[0],a=t[1],s=0,l=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);l.length;)l.shift()()}var n={},r={"twint-payment":0},i={"twint-payment":0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{0:1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var i="static/css/"+({}[e]||e)+".css",a=o.p+i,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(f=s[l]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(c===i||c===a))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){var f;if((c=(f=u[l]).getAttribute("data-href"))===i||c===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css";d.onerror=d.onload=function(i){if(d.onerror=d.onload=null,"load"===i.type)t();else{var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||a,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=s,delete r[e],d.parentNode.removeChild(d),n(l)}},d.href=a,document.head.appendChild(d)})).then((function(){r[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+"static/js/"+{0:"7b8ba551d1f8d9a2a0df",1:"8dd845bd49b72ffc4471",2:"dda85ac91f1c90af1588"}[e]+".js"}(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=(window.__sw__.assetPath + '/bundles/twintpayment/'),o.oe=function(e){throw console.error(e),e};var a=this["webpackJsonpPlugintwint-payment"]=this["webpackJsonpPlugintwint-payment"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=s;o(o.s="I+oZ")}({"2Puq":function(e,t,n){var r=n("ncrE");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("0cbb2e34",r,!0,{})},"3g9p":function(e,t,n){Shopware.Component.register("twint-payment-plugin-icon",(function(){return n.e(0).then(n.bind(null,"FdAP"))})),Shopware.Component.register("twint-settings",(function(){return n.e(2).then(n.bind(null,"DobE"))})),Shopware.Component.register("express-settings",(function(){return n.e(1).then(n.bind(null,"WR6I"))})),Shopware.Module.register("twint-payment",{type:"plugin",name:"TwintPayment",title:"twint.title",description:"twint.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routeMiddleware:function(e,t){e(t)},routes:{index:{component:"twint-settings",path:"index",meta:{parentPath:"sw.settings.index.plugins"}},express:{component:"express-settings",path:"express",meta:{parentPath:"sw.settings.index.plugins"}}},settingsItem:[{name:"twint-payment-express",to:"twint.payment.express",label:"twint.express.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1},{name:"twint-payment",to:"twint.payment.index",label:"twint.general.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1}]})},"6D7V":function(e){e.exports=JSON.parse('{"twint":{"title":"TWINT payment","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT credentials","descriptionTextModule":"TWINT is a Swiss payment app that allows you to pay in stores, online, and transfer money to friends and family."},"settings":{"button":{"save":"Save","testing":"Verifying credentials ..."},"testCredentials":{"error":{"title":"Credential Error","message":"Credential configuration is invalid. Please check again: merchant ID, certificate and environment (mode)"}},"merchantId":{"label":"Merchant ID","placeholder":"Enter your merchant ID","helpText":"The merchant ID provided by TWINT","error":{"title":"Merchant ID","invalidFormat":"Merchant ID has an invalid format. Has to be a UUIDv4","required":"Merchant ID is required"}},"certificate":{"placeholder":"Select a certificate file (.p12)","error":{"title":"Certificate Error","message":"There was an error reading the certificate. Please try again.","general":"There was an error reading the certificate. Please try again.","required":"Certificate file is required","ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Something went wrong with the certificate validation. Please try again.","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid passphrase","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate not yet valid"},"success":{"title":"Certificate Success","message":"Reading certificate successful"},"password":{"label":"Certificate Password","helpText":"The password for the certificate file"}}}}}')},"I+oZ":function(e,t,n){"use strict";n.r(t);var r=n("fTAK"),i=n("6D7V");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Locale.extend("de-DE",r),Shopware.Locale.extend("en-GB",i);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(o,e);var t,n,r,i=c(o);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return a(this,o),i.call(this,e,t,n)}return t=o,(n=[{key:"uploadFile",value:function(e,t){var n=this.getBasicHeaders();n["Content-Type"]="multipart/form-data";var r=new FormData;return r.append("file",e),r.append("password",t),this.httpClient.post("_actions/twint/extract-pem",r,{headers:n})}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Shopware.Classes.ApiService);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),r)}var i,o}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=Shopware.Classes.ApiService,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(o,e);var t,n,r,i=v(o);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return h(this,o),i.call(this,e,t,n)}return t=o,(n=[{key:"validateCredential",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_actions/twint/validate-api-credential",e,{headers:t}).then((function(e){return b.handleResponse(e)}))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(b),R=Shopware.Application,S=R.getContainer("init").httpClient,_=Shopware.Service("loginService");R.addServiceProvider("twintFileUploadService",(function(){return new d(S,_)})),R.addServiceProvider("TwintPaymentSettingsService",(function(e){return new I(S,_)}));n("2Puq");var T=Shopware,E=T.Component,C=T.Mixin;E.register("twint-certificate",{template:Shopware.Feature.isActive("v6.6.0.0")?'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @update:value="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword"\n                required\n        >\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n':'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @change="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword">\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n',mixins:[C.getByName("notification")],inject:["feature"],data:function(){return{currentPassword:null,currentCertFile:null}},methods:{onFileChange:function(e){this.currentCertFile=e,this.extractPem()},updatePassword:function(e){this.extractPem()},extractPem:function(){var e,t=this,n=Shopware.Service("twintFileUploadService");this.currentCertFile&&this.currentPassword&&0!==this.currentPassword.length&&n.uploadFile(this.currentCertFile,null!==(e=this.currentPassword)&&void 0!==e?e:"").then((function(e){t.updateCertificate(e.data.data),t.createNotification({title:t.$tc("twint.settings.certificate.success.title"),message:t.$tc("twint.settings.certificate.success.message"),growl:!0}).then((function(e){}))})).catch((function(e){if(400===e.response.status){var n=e.response.data.errorCode;return t.createNotificationError({title:t.$tc("twint.settings.certificate.error.title"),message:t.$tc("twint.settings.certificate.error."+n),growl:!0})}t.createNotificationError({title:t.$tc("twint.settings.certificate.error.title"),message:t.$tc("twint.settings.certificate.error.general"),growl:!0})}))},updateCertificate:function(e){this.feature.isActive("v6.6.0.0")?this.$emit("update:value",e):this.$emit("input",e)}}});n("pfrm"),n("3g9p")},P8hj:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},f=null,d="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){c=n,f=i||{};var a=r(e,t);return m(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i];(l=o[s.id]).refs--,n.push(l)}t?m(a=r(e,t)):a=[];for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete o[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(v(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(v(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,n,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(p){var i=l++;r=s||(s=g()),t=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=g(),t=I.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var w,y=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function I(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),f.ssrId&&e.setAttribute(d,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},fTAK:function(e){e.exports=JSON.parse('{"twint":{"title":"TWINT-Anmeldeinformationen","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT-Anmeldeinformationen","descriptionTextModule":"TWINT ist eine Schweizer Bezahl-App, mit der Sie in Geschäften, online und Geld an Freunde und Familie überweisen können."},"settings":{"button":{"save":"Speichern","testing":"Anmeldeinformationen werden überprüft ..."},"testCredentials":{"error":{"title":"Anmeldeinformationen ungültig","message":"Die Anmeldeinformationen sind ungültig. Bitte überprüfen Sie die Händler-ID, das Zertifikat und die Umgebung (Modus)."}},"merchantId":{"label":"Händler-ID","placeholder":"Geben Sie Ihre Händler-ID ein","helpText":"Die von TWINT bereitgestellte Händler-ID","error":{"title":"Händler-ID","invalidFormat":"Die Händler-ID hat ein ungültiges Format. Muss eine UUIDv4 sein","required":"Händler-ID ist erforderlich"}},"certificate":{"placeholder":"Wählen Sie eine Zertifikatsdatei (.p12)","error":{"title":"Zertifikatsfehler","message":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","general":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","required":"Zertifikatsdatei ist erforderlich","ERROR_INVALID_INPUT":"Zertifikatsdatei und Passwort sind erforderlich","ERROR_INVALID_UNKNOWN":"Bei der Zertifikatsvalidierung ist etwas schiefgelaufen. Bitte versuchen Sie es erneut.","ERROR_INVALID_CERTIFICATE_FORMAT":"Ungültiges Zertifikatsformat","ERROR_INVALID_PASSPHRASE":"Ungültiges Passwort","ERROR_INVALID_ISSUER_COUNTRY":"Ungültiges Herkunftsland des Ausstellers","ERROR_INVALID_ISSUER_ORGANIZATION":"Ungültige Herkunftsorganisation des Ausstellers","ERROR_INVALID_EXPIRY_DATE":"Ungültiges Ablaufdatum","ERROR_CERTIFICATE_EXPIRED":"Zertifikat abgelaufen","ERROR_CERTIFICATE_NOT_YET_VALID":"Zertifikat noch nicht gültig"},"success":{"title":"Zertifikat erfolgreich","message":"Zertifikat wurde erfolgreich gelesen"},"password":{"label":"Zertifikatspasswort","helpText":"Das Passwort für die Zertifikatsdatei"}}}}}')},ncrE:function(e,t,n){},pfrm:function(e,t){var n=Shopware,r=n.Component,i=n.Mixin;r.extend("twint-merchant-id","sw-text-field",{mixins:[i.getByName("notification")],methods:{onChange:function(e){this.$super("onChange",e),this.isValidUUIDv4(e.target.value)||this.createNotificationError({title:this.$tc("twint.settings.merchantId.error.title"),message:this.$tc("twint.settings.merchantId.error.invalidFormat")})},isValidUUIDv4:function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}})}});
//# sourceMappingURL=twint-payment.js.map
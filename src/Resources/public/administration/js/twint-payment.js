/*! For license information please see twint-payment.js.LICENSE.txt */
!function(t){function e(e){for(var n,r,i=e[0],a=e[1],s=0,c=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&c.push(o[r][0]),o[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(l&&l(e);c.length;)c.shift()()}var n={},r={"twint-payment":0},o={"twint-payment":0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[];r[t]?e.push(r[t]):0!==r[t]&&{0:1}[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="static/css/"+({}[t]||t)+".css",a=i.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===o||l===a))return e()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var d;if((l=(d=u[c]).getAttribute("data-href"))===o||l===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css";f.onerror=f.onload=function(o){if(f.onerror=f.onload=null,"load"===o.type)e();else{var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||a,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,delete r[t],f.parentNode.removeChild(f),n(c)}},f.href=a,document.head.appendChild(f)})).then((function(){r[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,r){n=o[t]=[e,r]}));e.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(t){return i.p+"static/js/"+{0:"7b8ba551d1f8d9a2a0df",1:"8dd845bd49b72ffc4471",2:"dda85ac91f1c90af1588"}[t]+".js"}(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=(window.__sw__.assetPath + '/bundles/twintpayment/'),i.oe=function(t){throw console.error(t),t};var a=this["webpackJsonpPlugintwint-payment"]=this["webpackJsonpPlugintwint-payment"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=s;i(i.s="I+oZ")}({"+Nbo":function(t,e){var n=Shopware.Data.Criteria;Shopware.Component.override("sw-order-detail-details",{inject:["repositoryFactory","acl"],data:function(){return{customFieldSets:[]}},methods:{createdComponent:function(){var t=this;this.$super("createdComponent"),this.customFieldSetRepository.search(this.customFieldSetCriteria).then((function(e){t.customFieldSets=e}))}},computed:{customFieldSetRepository:function(){return this.repositoryFactory.create("custom_field_set")},customFieldSetCriteria:function(){var t=new n(1,null);return t.addFilter(n.not("AND",[n.equals("name","twint_payment_custom_field_set")])),t.addFilter(n.equals("relations.entityName","order")),t}}})},"2Puq":function(t,e,n){var r=n("ncrE");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("0cbb2e34",r,!0,{})},"3g9p":function(t,e,n){Shopware.Component.register("twint-payment-plugin-icon",(function(){return n.e(0).then(n.bind(null,"FdAP"))})),Shopware.Component.register("twint-settings",(function(){return n.e(2).then(n.bind(null,"DobE"))})),Shopware.Component.register("express-settings",(function(){return n.e(1).then(n.bind(null,"WR6I"))})),Shopware.Module.register("twint-payment",{type:"plugin",name:"TwintPayment",title:"twint.title",description:"twint.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routeMiddleware:function(t,e){t(e)},routes:{index:{component:"twint-settings",path:"index",meta:{parentPath:"sw.settings.index.plugins"}},express:{component:"express-settings",path:"express",meta:{parentPath:"sw.settings.index.plugins"}}},settingsItem:[{name:"twint-payment-express",to:"twint.payment.express",label:"twint.express.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1},{name:"twint-payment",to:"twint.payment.index",label:"twint.general.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1}]})},"6D7V":function(t){t.exports=JSON.parse('{"twint":{"name":"TWINT payment","title":"TWINT payment","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT Credentials","descriptionTextModule":"TWINT is a Swiss payment app that allows you to pay in stores and online shops digitally and cashlessly"},"settings":{"button":{"save":"Save","testing":"Verifying credentials ..."},"testCredentials":{"error":{"title":"Credential Error","message":"Invalid credentials. Please check again: Merchant ID, certificate and environment (mode)"}},"merchantId":{"label":"Merchant ID","placeholder":"Enter your Merchant ID","helpText":"The Merchant ID is provided by TWINT","error":{"title":"Merchant ID","invalidFormat":"Invalid Merchant ID. Merchant ID needs to be a UUIDv4","required":"Merchant ID is required"}},"certificate":{"placeholder":"Upload a certificate file (.p12)","error":{"title":"Invalid Certificate","message":"An error occurred reading the certificate. Please try again ","general":"An error occurred reading the certificate. Please try again","required":"Certificate file is required","ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Certificate cannot be validated. Please try again","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid passphrase","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate is not yet valid"},"success":{"title":"Certificate validation successful","message":"Your certificate is successfully validated"},"password":{"label":"Certificate Password","helpText":"Please enter the password for the certificate"}}},"order":{"stateCard":{"label":"Payment has been processed by TWINT","showTransactionLogModal":"Show transaction logs"},"transactionLog":{"cardTitle":"Transaction logs","list":{"title":"Transactions","columns":{"createdAt":"Created at","apiMethod":"API method","orderID":"Order ID","order":"Order status","transaction":"Order transaction ID","request":"Request","response":"Response","soapRequest":"Request","soapResponse":"Response","exception":"Exception","payment":"Payment status","action":{"view":"View details"}},"modal":{"title":"TWINT Transaction log","close":"Close","soapMethod":"SOAP method"}}},"reversalHistory":{"cardTitle":"Reversal history","columns":{"amount":"Amount","currency":"Currency","reason":"Reason","createdAt":"Created at"}},"refundAction":{"cardTitle":"Refund","reason":{"label":"Reason","placeholder":"Add note to this refund"},"refundAmount":{"label":"Amount","helpText":"The refund amount cannot exceed the total order amount"},"confirmButton":{"text":"Execute"}}},"refund":{"modal":{"title":"Create new refund"},"buttons":{"refund":{"label":"Refund"}},"refundable":{"title":"Total refundable amount left","notice":"Total amount automatically adjusted to the maximum order price."},"error":{"title":"Refund error"}}},"sw-order":{"detail":{"twint":"TWINT"}}}')},FUWB:function(t,e,n){},"I+oZ":function(t,e,n){"use strict";n.r(e);var r=n("fTAK"),o=n("6D7V");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,a=void 0,a=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Shopware.Locale.extend("de-DE",r),Shopware.Locale.extend("en-GB",o);var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(i,t);var e,n,r,o=l(i);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return a(this,i),o.call(this,t,e,n)}return e=i,(n=[{key:"uploadFile",value:function(t,e){var n=this.getBasicHeaders();n["Content-Type"]="multipart/form-data";var r=new FormData;return r.append("file",t),r.append("password",e),this.httpClient.post("_actions/twint/extract-pem",r,{headers:n})}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Shopware.Classes.ApiService);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===p(i)?i:String(i)),r)}var o,i}function w(t,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=Shopware.Classes.ApiService,_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(i,t);var e,n,r,o=y(i);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return m(this,i),o.call(this,t,e,n)}return e=i,(n=[{key:"validateCredential",value:function(t){var e=this.getBasicHeaders();return this.httpClient.post("_actions/twint/validate-api-credential",t,{headers:e}).then((function(t){return b.handleResponse(t)}))}}])&&h(e.prototype,n),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===S(i)?i:String(i)),r)}var o,i}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=Shopware.Classes.ApiService,k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(i,t);var e,n,r,o=T(i);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return I(this,i),o.call(this,t,e,n)}return e=i,(n=[{key:"refund",value:function(t){var e=this.getBasicHeaders();return this.httpClient.post("_actions/twint/refund",t,{headers:e}).then((function(t){return P.handleResponse(t)}))}},{key:"orderStatus",value:function(t){var e=this.getBasicHeaders();return this.httpClient.get("_actions/twint/order/".concat(t,"/status"),{headers:e}).then((function(t){return P.handleResponse(t)}))}}])&&R(e.prototype,n),r&&R(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(P),L=Shopware.Application,C=L.getContainer("init").httpClient,E=Shopware.Service("loginService");L.addServiceProvider("twintFileUploadService",(function(){return new f(C,E)})),L.addServiceProvider("TwintPaymentSettingsService",(function(t){return new _(C,E)})),L.addServiceProvider("TwintPaymentService",(function(t){return new k(C,E)}));n("2Puq");var N=Shopware,D=N.Component,j=N.Mixin;D.register("twint-certificate",{template:Shopware.Feature.isActive("v6.6.0.0")?'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @update:value="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword"\n                required\n        >\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n':'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @change="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword">\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n',mixins:[j.getByName("notification")],inject:["feature"],data:function(){return{currentPassword:null,currentCertFile:null}},methods:{onFileChange:function(t){this.currentCertFile=t,this.extractPem()},updatePassword:function(t){this.extractPem()},extractPem:function(){var t,e=this,n=Shopware.Service("twintFileUploadService");this.currentCertFile&&this.currentPassword&&0!==this.currentPassword.length&&n.uploadFile(this.currentCertFile,null!==(t=this.currentPassword)&&void 0!==t?t:"").then((function(t){e.updateCertificate(t.data.data),e.createNotification({title:e.$tc("twint.settings.certificate.success.title"),message:e.$tc("twint.settings.certificate.success.message"),growl:!0}).then((function(t){}))})).catch((function(t){if(400===t.response.status){var n=t.response.data.errorCode;return e.createNotificationError({title:e.$tc("twint.settings.certificate.error.title"),message:e.$tc("twint.settings.certificate.error."+n),growl:!0})}e.createNotificationError({title:e.$tc("twint.settings.certificate.error.title"),message:e.$tc("twint.settings.certificate.error.general"),growl:!0})}))},updateCertificate:function(t){this.feature.isActive("v6.6.0.0")?this.$emit("update:value",t):this.$emit("input",t)}}});n("pfrm"),n("3g9p"),n("yMVt");function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===M(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q=Shopware,U=q.Component,H=q.Mixin,V=Shopware.Component.getComponentHelper().mapState,W=Shopware.Data.Criteria;U.register("twint-payment-actions",{template:'<div class="sw-order-detail-twint">\n    <sw-container>\n        {% block sw_order_detail_twint_actions_row_reversal_form %}\n            <sw-card  v-if="canRefund" position-identifier="twint-details-actions" :title="$tc(\'twint.order.refundAction.cardTitle\')">\n                {% block sw_order_detail_twint_actions_rows %}\n                    <template #default>\n                        {% block sw_order_detail_twint_actions_row_primary %}\n                            <sw-button variant="primary"\n                                       size="small"\n                                       :disabled="refundableAmount==0 || !acl.can(\'order.editor\')"\n                                       @click="showModal">\n                                {{ $tc(\'twint.refund.buttons.refund.label\') }}\n                            </sw-button>\n                            <span class="twint-refundable-amount__title" v-if="refundableAmount > 0">\n                            {{ $tc(\'twint.refund.refundable.title\') }}\n                            </span>\n                            <sw-label v-if="refundableAmount > 0">{{ currencyFilter(refundableAmount, currency, decimalPrecision) }}</sw-label>\n                            {% block twint_modal_refund %}\n                                <sw-modal variant="small"\n                                          :title="$tc(`twint.refund.modal.title`)" v-if="showRefundModal" @modal-close="onCloseModal">\n                                    <sw-alert class="twint-refundable-amount__notice-message" v-if="refundableAmount==refundAmount" variant="warning">\n                                        <span>{{ $tc(\'twint.refund.refundable.notice\') }}</span>\n                                    </sw-alert>\n\n                                    {% block twint_refund_amount %}\n                                        <sw-number-field\n                                                v-model:value="refundAmount"\n                                                :max="refundableAmount"\n                                                :min="0"\n                                                numberType="float"\n                                                :step="dynamicStep"\n                                                :label="$tc(\'twint.order.refundAction.refundAmount.label\')"\n                                                :helpText="$tc(\'twint.order.refundAction.refundAmount.helpText\')">\n                                            <template #suffix>\n                                                {{ currency }}\n                                            </template>\n                                        </sw-number-field>\n                                    {% endblock %}\n\n                                    {% block twint_refund_reason %}\n                                        <sw-textarea-field\n                                                v-model:value="reason"\n                                                maxLength="127"\n                                                :label="$tc(\'twint.order.refundAction.reason.label\')"\n                                                :placeholder="$tc(\'twint.order.refundAction.reason.placeholder\')">\n                                        </sw-textarea-field>\n                                    {% endblock %}\n\n                                    {% block twint_refund_confirm_button %}\n                                        <template #modal-footer>\n                                            <sw-button variant="primary"\n                                                       @click="refund">\n                                                {{ $tc(\'twint.order.refundAction.confirmButton.text\') }}\n                                            </sw-button>\n                                        </template>\n                                    {% endblock %}\n\n                                    <sw-loader v-if="isLoading"></sw-loader>\n                                </sw-modal>\n                            {% endblock %}\n                        {% endblock %}\n                    </template>\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n        {% block sw_order_detail_twint_actions_row_reversal_history %}\n            <sw-card position-identifier="twint-details-actions-reversal-list" :title="$tc(\'twint.order.reversalHistory.cardTitle\')">\n                <template #grid>\n                    {% block sw_order_detail_twint_state_change_card_modal %}\n                        <sw-order-state-change-modal\n                                v-if="showStateModal"\n                                :order="order"\n                                :is-loading="isLoading"\n                                :technical-name="\'\'"\n                                @page-leave="onLeaveModalClose"\n                                @page-leave-confirm="onLeaveModalConfirm"\n                        />\n                    {% endblock %}\n                    {% block sw_order_detail_twint_reversal_history_grid %}\n                        <sw-data-grid v-if="reversalHistory.length > 0" :data-source="reversalHistory"\n                                      :columns="paymentColumns"\n                                      :showActions="false"\n                                      :showSelection="false">\n                            <template #column-createdAt="{ item }">\n                                {{ dateFilter(item.createdAt) }}\n                            </template>\n                            <template #column-amount="{ item }">\n                                {{ currencyFilter(item.amount, item.currency, decimalPrecision)}}\n                            </template>\n                        </sw-data-grid>\n                    {% endblock %}\n                </template>\n            </sw-card>\n        {% endblock %}\n    </sw-container>\n</div>\n',inject:["repositoryFactory","acl","TwintPaymentService","orderStateMachineService"],mixins:[H.getByName("notification"),H.getByName("sw-inline-snippet")],props:{order:{type:Object,required:!0},orderId:{type:String,required:!0},totalAmount:{type:Number,required:!0},currency:{type:String,required:!0},decimalPrecision:{type:String,required:!0}},data:function(){return{reversalId:"",reversalHistory:[],refundAmount:0,refundedAmount:0,reason:"",refundableAmount:0,isLoading:!1,showRefundModal:!1,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0,stateType:"order_transaction",transaction:null,currentActionName:null,showStateModal:!1}},created:function(){this.createdComponent()},computed:$($({},V("swOrderDetail",["order","versionContext","orderAddressIds","editing","loading"])),{},{reversalHistoryRepository:function(){return this.repositoryFactory.create("twint_reversal_history")},paymentColumns:function(){return[{property:"amount",label:this.$tc("twint.order.reversalHistory.columns.amount"),rawData:!0},{property:"reason",label:this.$tc("twint.order.reversalHistory.columns.reason"),rawData:!0},{property:"createdAt",label:this.$tc("twint.order.reversalHistory.columns.createdAt"),rawData:!0}]},dateFilter:function(){return Shopware.Filter.getByName("date")},canRefund:function(){for(var t=0;t<this.order.transactions.length;t+=1)if(["paid","paid_partially","refunded_partially","refunded"].includes(this.order.transactions[t].stateMachineState.technicalName))return!0;return!1},currencyFilter:function(){return Shopware.Filter.getByName("currency")},dynamicStep:function(){return this.decimalPrecision<0?.01:Math.pow(10,-this.decimalPrecision)}}),methods:{createdComponent:function(){this.getReversalHistoryList();for(var t=0;t<this.order.transactions.length;t+=1)["cancelled","failed"].includes(this.order.transactions[t].stateMachineState.technicalName)||(this.transaction=this.order.transactions[t]);this.transaction=this.order.transactions.last()},showModal:function(){this.showRefundModal=!0},closeModal:function(){this.showRefundModal=""},onCloseModal:function(){this.showRefundModal=""},getReversalHistoryList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new W;e.addSorting(W.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addFilter(W.equals("order.id",this.orderId)),e.addAggregation(W.sum("refundedAmount","amount")),this.isLoading=!0,this.reversalHistoryRepository.search(e).then((function(e){var n,r;t.reversalHistory=e;var o=parseFloat(null==e||null===(n=e.aggregations)||void 0===n||null===(r=n.refundedAmount)||void 0===r?void 0:r.sum);t.isLoading=!1,t.refundableAmount=t.roundingFloat(t.totalAmount-o,t.decimalPrecision)})).catch((function(){t.isLoading=!1}))},refund:function(){var t=this,e={orderId:this.orderId,amount:this.refundAmount,reason:this.reason};this.isLoading=!0,this.TwintPaymentService.refund(e).then((function(e){var n,r,o=null!==(n=e.success)&&void 0!==n&&n;t.currentActionName=null!==(r=e.action)&&void 0!==r?r:"",o?(t.showRefundModal=!1,t.getReversalHistoryList(),t.isLoading=!1,t.resetRefundForm(),t.$root.$emit("refund-finish"),t.currentActionName&&(t.showStateModal=!0)):(t.isLoading=!1,t.createNotificationError({title:t.$tc("twint.refund.error.title"),message:e.error}))})).finally((function(e){t.isLoading=!1,t.showRefundModal=!1}))},resetRefundForm:function(){this.refundAmount=0,this.reason=""},roundingFloat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(Number(t).toFixed(e))},onLeaveModalClose:function(){this.currentActionName=null,this.showStateModal=!1},onLeaveModalConfirm:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.showStateModal=!1,this.currentActionName){var r=this.orderStateMachineService.transitionOrderTransactionState(this.transaction.id,this.currentActionName,{documentIds:t,sendMail:n});r&&r.then((function(){e.TwintPaymentService.orderStatus(e.orderId).then((function(t){var n;null!==(n=t.success)&&void 0!==n&&n&&(e.$root.$emit("save-edits"),e.$root.$emit("refund-finish"))}))})).catch((function(t){e.createNotificationError({title:e.$tc("twint.refund.error.title"),message:t})})).finally((function(){e.showStateModal=!1,e.currentActionName=null}))}}}});function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(){Z=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new O(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function m(){}var h={};c(h,i,(function(){return this}));var w=Object.getPrototypeOf,y=w&&w(w(T([])));y&&y!==e&&n.call(y,i)&&(h=y);var g=m.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(r,i,a,s){var c=u(t[r],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==G(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return x()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},v(b.prototype),c(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(g),c(g,s,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function z(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var Y=Shopware.Data.Criteria;Shopware.Component.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_extension %}\n    {% parent %}\n    <sw-tabs-item\n            v-if="isTwintOrder"\n            class="sw-order-detail__tab-twint"\n            :route="{ name: \'sw.order.detail.twint\', params: { id: $route.params.id } }"\n            :title="$tc(\'sw-order.detail.twint\')">\n        {{ $tc(\'sw-order.detail.twint\') }}\n    </sw-tabs-item>\n{% endblock %}',data:function(){return{isLoading:!1,pairings:null,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0}},methods:{createdComponent:function(){this.$super("createdComponent"),this.isLoading=!0,this.getPairingList(),this.$root.$on("save-edits",this.onSaveEdits)},getPairingList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new Y;e.addSorting(Y.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addAssociation("order"),e.addFilter(Y.equals("order.id",this.orderId)),this.isLoading=!0,this.twintPairingRepository.search(e).then((function(e){t.pairings=e,t.isLoading=!1})).catch((function(){t.isLoading=!1}))},onSaveEdits:function(){var t,e=this;return(t=Z().mark((function t(){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$super("onSaveEdits");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){z(i,r,o,a,s,"next",t)}function s(t){z(i,r,o,a,s,"throw",t)}a(void 0)}))})()}},destroyed:function(){this.$root.$off("save-edits")},computed:{twintPairingRepository:function(){return this.repositoryFactory.create("twint_pairing")},isTwintOrder:function(){var t,e,n=!1;return((null===(t=this.order)||void 0===t?void 0:t.customFields)||{}).twint_api_response&&(n=!0),(null===(e=this.pairings)||void 0===e?void 0:e.length)>0||n}}});n("+Nbo"),n("fKsf");function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===K(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tt=Shopware,et=tt.Application,nt=tt.Mixin,rt=Shopware.Data.Criteria,ot=Shopware.Component.getComponentHelper(),it=ot.mapState;ot.mapGetters;Shopware.Component.register("sw-order-detail-twint",{template:'{% block sw_order_detail_twint %}\n    <div class="sw-order-twint-detail">\n    <template>\n        <sw-card-view>\n            {% block sw_order_detail_twint_reversal_card %}\n                <twint-payment-actions\n                        :order="order"\n                        :orderId="orderId"\n                        :currency="order.currency.isoCode"\n                        :decimalPrecision="order.itemRounding.decimals"\n                        :totalAmount="order.amountTotal"\n                >\n                </twint-payment-actions>\n            {% endblock %}\n            {% block sw_order_detail_twint_transaction_log_card_grid %}\n                <sw-card :title="$tc(\'twint.order.transactionLog.cardTitle\')" class="twint-transaction-log" position-identifier="sw-order-detail-twint">\n                    <template\n                            v-if="(transactionLogs && transactionLogs.total > 0)"\n                            #grid\n                    >\n                        {% block twint_transaction_log_list_content %}\n                            <sw-entity-listing\n                                    class="twint-transaction-logs-grid"\n                                    v-if="transactionLogs"\n                                    :items="transactionLogs"\n                                    :repository="transactionLogRepository"\n                                    :columns="transactionLogColumns"\n                                    :sort-by="sortBy"\n                                    :sort-direction="sortDirection"\n                                    :showSelection="false"\n                                    :allowDelete="false"\n                                    :showDelete="false"\n                                    :isLoading="isLoading"\n                                    @on-add-new-refund="getTransactionLogList">\n\n                                {% block twint_transaction_log_list_content_order %}\n                                    <template #column-orderId="{ item }">\n                                        <router-link :to="{ name: \'sw.order.detail\', params: { id: item.orderId }, query: { edit: false } }">\n                                            {{ item.order.orderNumber }}\n                                        </router-link>\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_transaction %}\n                                    <template #column-transactionId="{ item }">\n                                        {{ item.transactionId }}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_payment %}\n                                    <template #column-paymentStateId="{ item }">\n                                        <sw-label :variant="getVariantState(\'order_transaction\', item.paymentStateMachineState)" appearance="badged">\n                                            {{ item.paymentStateMachineState.name }}\n                                        </sw-label>\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_order %}\n                                    <template #column-orderStateId="{ item }">\n                                        <sw-label :variant="getVariantState(\'order\', item.orderStateMachineState)" appearance="badged">\n                                            {{ item.orderStateMachineState.name }}\n                                        </sw-label>\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_created_at %}\n                                    <template #column-createdAt="{ item }">\n                                        {{ dateFilter(item.createdAt) }}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_actions %}\n                                    <template #actions="{ item }">\n                                        {% block twint_transaction_log_list_content_actions_view %}\n                                            <sw-context-menu-item class="twint-transaction-log-grid-btn-view"\n                                                                  @click="onOpenModalDetail(item.id)">\n                                                {{ $tc(\'twint.order.transactionLog.list.columns.action.view\') }}\n                                            </sw-context-menu-item>\n                                        {% endblock %}\n                                    </template>\n                                {% endblock %}\n                                {% block twint_transaction_log_list_content_action_modals %}\n                                    <template #action-modals="{ item }">\n                                        {% block twint_transaction_log_list_content_action_detail_modal %}\n                                            <sw-modal\n                                                    v-if="showTransactionLogDetailModal === item.id"\n                                                    :title="$tc(\'twint.order.transactionLog.list.modal.title\')"\n                                                    variant="large"\n                                                    @modal-close="onCloseModalDetail"\n                                            >\n                                                {% block twint_transaction_log_list_content_action_detail_modal_order %}\n                                                    <p class="sw-order-detail-twint-modal-order">\n                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.orderID\') }}:</b> {{ item.order.orderNumber }}\n                                                    </p>\n                                                    <p class="sw-order-detail-twint-modal-transaction">\n                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.transaction\') }}:</b> {{ item.transactionId }}\n                                                    </p>\n                                                    <p class="sw-order-detail-twint-modal-payment">\n                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.payment\') }}:</b> {{ item.paymentStateMachineState.name }}\n                                                    </p>\n                                                    <p class="sw-order-detail-twint-modal-order">\n                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.order\') }}:</b> {{ item.orderStateMachineState.name }}\n                                                    </p>\n                                                    <b class="sw-order-detail-twint-modal-soap-request">\n                                                        {{ $tc(\'twint.order.transactionLog.list.columns.request\') }}\n                                                    </b>\n                                                    <sw-textarea-field :disabled="true" :value="item.request" />\n                                                    <b class="sw-order-detail-twint-modal-soap-response">\n                                                        {{ $tc(\'twint.order.transactionLog.list.columns.response\') }}\n                                                    </b>\n                                                    <sw-textarea-field :disabled="true" :value="item.response"/>\n\n                                                    <sw-card v-for="(request, index) in item.soapRequest">\n                                                        <sw-container>\n                                                            <h4>{{ item.apiMethod }}</h4>\n                                                            <b class="sw-order-detail-twint-modal-soap-request">\n                                                                {{ $tc(\'twint.order.transactionLog.list.columns.soapRequest\') }}\n                                                            </b>\n                                                            <sw-textarea-field :disabled="true" :value="request"/>\n\n                                                            <b class="sw-order-detail-twint-modal-soap-response" v-if="item.soapResponse[index]">\n                                                                {{ $tc(\'twint.order.transactionLog.list.columns.soapResponse\') }}\n                                                            </b>\n                                                            <sw-textarea-field  v-if="item.soapResponse[index]" :disabled="true" :value="item.soapResponse[index]"/>\n                                                        </sw-container>\n                                                    </sw-card>\n                                                    <p class="sw-order-detail-twint-modal-exception">\n                                                        {{ $tc(\'twint.order.transactionLog.list.columns.exception\') }}\n                                                    </p>\n                                                    <sw-textarea-field :disabled="true" :value="item.exception"/>\n                                                {% endblock %}\n\n                                                {% block twint_transaction_log_list_content_action_detail_modal_footer %}\n                                                    <template #modal-footer>\n                                                        {% block twint_transaction_log_list_content_action_detail_modal_close %}\n                                                            <sw-button size="small" @click="onCloseModalDetail">\n                                                                {{ $tc(\'twint.order.transactionLog.list.modal.close\') }}\n                                                            </sw-button>\n                                                        {% endblock %}\n                                                    </template>\n                                                {% endblock %}\n                                            </sw-modal>\n                                        {% endblock %}\n                                    </template>\n                                {% endblock %}\n                            </sw-entity-listing>\n                        {% endblock %}\n                    </template>\n                </sw-card>\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    </div>\n{% endblock %}',mixins:[nt.getByName("notification"),nt.getByName("listing")],inject:["repositoryFactory","acl","stateStyleDataProviderService"],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{isLoading:!1,transactionLogs:null,refundedAmount:0,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0,showTransactionLogDetailModal:!1}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.isLoading=!0,this.getTransactionLogList(),this.$root.$on("refund-finish",this.getTransactionLogList)},getTransactionLogList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new rt;e.addSorting(rt.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addAssociation("order"),e.addAssociation("paymentStateMachineState"),e.addAssociation("orderStateMachineState"),e.addFilter(rt.equals("order.id",this.orderId)),this.isLoading=!0,this.transactionLogRepository.search(e).then((function(e){t.transactionLogs=e,t.isLoading=!1})).catch((function(){t.isLoading=!1}))},onOpenModalDetail:function(t){this.showTransactionLogDetailModal=t},onCloseModalDetail:function(){this.showTransactionLogDetailModal=!1},getVariantState:function(t,e){return this.stateStyleDataProviderService.getStyle("".concat(t,".state"),e.technicalName).variant}},destroyed:function(){this.$root.$off("refund-finish")},computed:X(X({},it("swOrderDetail",["order","versionContext","orderAddressIds","editing","loading"])),{},{orderId:function(){return this.$route.params.id},transactionLogRepository:function(){return this.repositoryFactory.create("twint_transaction_log")},totalTransactionLogs:function(){return this.transactionLogs.length},transactionLogColumns:function(){var t=et.getApplicationRoot();return t?[{property:"orderId",label:t.$tc("twint.order.transactionLog.list.columns.orderID"),allowResize:!0},{property:"apiMethod",label:t.$tc("twint.order.transactionLog.list.columns.apiMethod"),allowResize:!0},{property:"paymentStateId",label:t.$tc("twint.order.transactionLog.list.columns.payment"),allowResize:!0,sortable:!1},{property:"orderStateId",label:t.$tc("twint.order.transactionLog.list.columns.order"),allowResize:!0,align:"center"},{property:"createdAt",label:t.$tc("twint.order.transactionLog.list.columns.createdAt"),allowResize:!0}]:[]},dateFilter:function(){return Shopware.Filter.getByName("date")}})}),Shopware.Module.register("twint-sw-order-detail",{type:"plugin",name:"twint",title:"twint.name",description:"twint.pluginDescription",version:"1.0.0",targetVersion:"1.0.0",color:"#333",icon:"default-action-settings",routeMiddleware:function(t,e){"sw.order.detail"===e.name&&e.children.push({name:"sw.order.detail.twint",path:"/sw/order/detail/:id/twint",component:"sw-order-detail-twint",meta:{parentPath:"sw.order.index"}}),t(e)}})},P8hj:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=i[0],s={id:t+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,o){l=n,d=o||{};var a=r(t,e);return h(a),function(e){for(var n=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,n.push(c)}e?h(a=r(t,e)):a=[];for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(y(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(y(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function w(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(p){var o=c++;r=s||(s=w()),e=b.bind(null,r,o,!1),n=b.bind(null,r,o,!0)}else r=w(),e=_.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var g,v=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function b(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function _(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),d.ssrId&&t.setAttribute(f,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},fKsf:function(t,e,n){var r=n("FUWB");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("1c8c6fb8",r,!0,{})},fTAK:function(t){t.exports=JSON.parse('{"twint":{"title":"TWINT-Anmeldeinformationen","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT-Anmeldeinformationen","descriptionTextModule":"TWINT ist eine Schweizer Bezahl-App, mit der Sie in Geschäften, online und Geld an Freunde und Familie überweisen können."},"settings":{"button":{"save":"Speichern","testing":"Anmeldeinformationen werden überprüft ..."},"testCredentials":{"error":{"title":"Anmeldeinformationen ungültig","message":"Die Anmeldeinformationen sind ungültig. Bitte überprüfen Sie die Händler-ID, das Zertifikat und die Umgebung (Modus)."}},"merchantId":{"label":"Händler-ID","placeholder":"Geben Sie Ihre Händler-ID ein","helpText":"Die von TWINT bereitgestellte Händler-ID","error":{"title":"Händler-ID","invalidFormat":"Die Händler-ID hat ein ungültiges Format. Muss eine UUIDv4 sein","required":"Händler-ID ist erforderlich"}},"certificate":{"placeholder":"Wählen Sie eine Zertifikatsdatei (.p12)","error":{"title":"Zertifikatsfehler","message":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","general":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","required":"Zertifikatsdatei ist erforderlich","ERROR_INVALID_INPUT":"Zertifikatsdatei und Passwort sind erforderlich","ERROR_INVALID_UNKNOWN":"Bei der Zertifikatsvalidierung ist etwas schiefgelaufen. Bitte versuchen Sie es erneut.","ERROR_INVALID_CERTIFICATE_FORMAT":"Ungültiges Zertifikatsformat","ERROR_INVALID_PASSPHRASE":"Ungültiges Passwort","ERROR_INVALID_ISSUER_COUNTRY":"Ungültiges Herkunftsland des Ausstellers","ERROR_INVALID_ISSUER_ORGANIZATION":"Ungültige Herkunftsorganisation des Ausstellers","ERROR_INVALID_EXPIRY_DATE":"Ungültiges Ablaufdatum","ERROR_CERTIFICATE_EXPIRED":"Zertifikat abgelaufen","ERROR_CERTIFICATE_NOT_YET_VALID":"Zertifikat noch nicht gültig"},"success":{"title":"Zertifikat erfolgreich","message":"Zertifikat wurde erfolgreich gelesen"},"password":{"label":"Zertifikatspasswort","helpText":"Das Passwort für die Zertifikatsdatei "}}},"order":{"stateCard":{"label":"Zahlung wurde von TWINT verarbeitet","showTransactionLogModal":"Transaktionsprotokolle anzeigen"},"transactionLog":{"cardTitle":"Transaktionen","list":{"title":"Transaktionen","columns":{"createdAt":"Created at","apiMethod":"API methode","orderID":"Order ID","order":"Bestellen","transaction":"Order transaction ID","request":"Anfrage","response":"Antwort","soapRequest":"Anfrage","soapResponse":"Antwort","exception":"Ausnahme","payment":"Zahlung","action":{"view":"Details anzeigen"}},"modal":{"title":"TWINT Transaktionen","close":"Schließen","soapMethod":"SOAP method"}}},"reversalHistory":{"cardTitle":"Stornierungsverlauf","columns":{"amount":"Betrag","currency":"Währung","reason":"Grund","createdAt":"Erstellt"}},"refundAction":{"cardTitle":"Rückerstattungs","reason":{"label":"Grund","placeholder":"Geben Sie den Grund für die Rückerstattung ein"},"refundAmount":{"label":"Betrag","helpText":"The refund amount cannot exceed the total order amount"},"confirmButton":{"text":"Ausführen"}}}},"refund":{"modal":{"title":"Create new refund"},"buttons":{"refund":{"label":"Rückerstattung"}},"refundable":{"title":"Verbleibender Gesamtbetrag der Rückerstattung","notice":"Gesamtbetrag wird automatisch an den maximalen Bestellpreis angepasst."},"error":{"title":"Rückerstattungsfehler"}},"sw-order":{"detail":{"twint":"TWINT"}}}')},ncrE:function(t,e,n){},oGfU:function(t,e,n){},pfrm:function(t,e){var n=Shopware,r=n.Component,o=n.Mixin;r.extend("twint-merchant-id","sw-text-field",{mixins:[o.getByName("notification")],methods:{onChange:function(t){this.$super("onChange",t),this.isValidUUIDv4(t.target.value)||this.createNotificationError({title:this.$tc("twint.settings.merchantId.error.title"),message:this.$tc("twint.settings.merchantId.error.invalidFormat")})},isValidUUIDv4:function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}}})},yMVt:function(t,e,n){var r=n("oGfU");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("a386577a",r,!0,{})}});
//# sourceMappingURL=twint-payment.js.map
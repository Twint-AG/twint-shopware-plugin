(function(){var e,t,n,i,r,a,s,o,l={760:function(){},52:function(){},711:function(e,t,n){Shopware.Component.register("twint-payment-plugin-icon",()=>n.e(118).then(n.bind(n,118))),Shopware.Component.register("twint-settings",()=>n.e(863).then(n.bind(n,863))),Shopware.Component.register("express-settings",()=>n.e(423).then(n.bind(n,423))),Shopware.Module.register("twint-payment",{type:"plugin",name:"TwintPayment",title:"twint.title",description:"twint.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routeMiddleware(e,t){e(t)},routes:{index:{component:"twint-settings",path:"index",meta:{parentPath:"sw.settings.index.plugins"}},express:{component:"express-settings",path:"express",meta:{parentPath:"sw.settings.index.plugins"}}},settingsItem:[{name:"twint-payment-express",to:"twint.payment.express",label:"twint.express.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1},{name:"twint-payment",to:"twint.payment.index",label:"twint.general.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1}]})},613:function(){let{Component:e,Mixin:t}=Shopware;e.extend("twint-merchant-id","sw-text-field",{mixins:[t.getByName("notification")],methods:{onChange(e){this.$super("onChange",e),this.isValidUUIDv4(e.target.value)||this.createNotificationError({title:this.$tc("twint.settings.merchantId.error.title"),message:this.$tc("twint.settings.merchantId.error.invalidFormat")})},isValidUUIDv4(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}})},683:function(e,t,n){var i=n(760);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(346).Z("e9999b72",i,!0,{})},905:function(e,t,n){var i=n(52);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(346).Z("b343ab88",i,!0,{})},346:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r],s=a[0],o={id:e+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[s]?i[s].parts.push(o):n.push(i[s]={id:s,parts:[o]})}return n}n.d(t,{Z:function(){return h}});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},s=r&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,r){c=n,u=r||{};var s=i(e,t);return m(s),function(t){for(var n=[],r=0;r<s.length;r++){var o=a[s[r].id];o.refs--,n.push(o)}t?m(s=i(e,t)):s=[];for(var r=0;r<n.length;r++){var o=n[r];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete a[o.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],i=a[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(w(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var s=[],r=0;r<n.parts.length;r++)s.push(w(n.parts[r]));a[n.id]={id:n.id,refs:1,parts:s}}}}function g(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function w(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(c)return d;i.parentNode.removeChild(i)}if(f){var r=l++;t=I.bind(null,i=o||(o=g()),r,!1),n=I.bind(null,i,r,!0)}else t=b.bind(null,i=g()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function I(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function b(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(p,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,exports:{}};return l[e](n,n.exports,d),n.exports}d.m=l,d.d=function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.f={},d.e=function(e){return Promise.all(Object.keys(d.f).reduce(function(t,n){return d.f[n](e,t),t},[]))},d.u=function(e){return"static/js/"+({118:"e0e016f47b8dfe3603f7",423:"4daa8a88c1473e2dc943",863:"3786802070ff6452498e"})[e]+".js"},d.miniCssF=function(e){return"static/css/"+(736===e?"twint-payment":e)+".css"},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="administration:",d.l=function(n,i,r,a){if(e[n]){e[n].push(i);return}if(void 0!==r)for(var s,o,l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){s=u;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,d.nc&&s.setAttribute("nonce",d.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[i];var p=function(t,i){s.onerror=s.onload=null,clearTimeout(f);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(function(e){return e(i)}),t)return t(i)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),o&&document.head.appendChild(s)},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="bundles/twintpayment/",n=function(e,t,n,i){var r=document.createElement("link");return r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=function(a){if(r.onerror=r.onload=null,"load"===a.type)n();else{var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.href||t,l=Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=o,r.parentNode.removeChild(r),i(l)}},r.href=t,document.head.appendChild(r),r},i=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=n[i],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===e||a===t))return r}for(var s=document.getElementsByTagName("style"),i=0;i<s.length;i++){var r=s[i],a=r.getAttribute("data-href");if(a===e||a===t)return r}},r={736:0},d.f.miniCss=function(e,t){r[e]?t.push(r[e]):0!==r[e]&&({118:1})[e]&&t.push(r[e]=new Promise(function(t,r){var a=d.miniCssF(e),s=d.p+a;if(i(a,s))return t();n(e,s,t,r)}).then(function(){r[e]=0},function(t){throw delete r[e],t}))},a={736:0},d.f.j=function(e,t){var n=d.o(a,e)?a[e]:void 0;if(0!==n){if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=a[e]=[t,i]});t.push(n[2]=i);var r=d.p+d.u(e),s=Error();d.l(r,function(t){if(d.o(a,e)&&(0!==(n=a[e])&&(a[e]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,n[1](s)}},"chunk-"+e,e)}}},s=function(e,t){var n,i,r=t[0],s=t[1],o=t[2],l=0;if(r.some(function(e){return 0!==a[e]})){for(n in s)d.o(s,n)&&(d.m[n]=s[n]);o&&o(d)}for(e&&e(t);l<r.length;l++)i=r[l],d.o(a,i)&&a[i]&&a[i][0](),a[i]=0},(o=window["webpackJsonpPlugintwint-payment"]=window["webpackJsonpPlugintwint-payment"]||[]).forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o)),window?.__sw__?.assetPath&&(d.p=window.__sw__.assetPath+"/bundles/twintpayment/"),function(){"use strict";var e=JSON.parse('{"twint":{"title":"TWINT-Anmeldeinformationen","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT-Anmeldeinformationen","descriptionTextModule":"TWINT ist eine Schweizer Bezahl-App, mit der Sie in Gesch\xe4ften, online und Geld an Freunde und Familie \xfcberweisen k\xf6nnen."},"settings":{"button":{"save":"Speichern","testing":"Anmeldeinformationen werden \xfcberpr\xfcft ..."},"testCredentials":{"error":{"title":"Anmeldeinformationen ung\xfcltig","message":"Die Anmeldeinformationen sind ung\xfcltig. Bitte \xfcberpr\xfcfen Sie die H\xe4ndler-ID, das Zertifikat und die Umgebung (Modus)."}},"merchantId":{"label":"H\xe4ndler-ID","placeholder":"Geben Sie Ihre H\xe4ndler-ID ein","helpText":"Die von TWINT bereitgestellte H\xe4ndler-ID","error":{"title":"H\xe4ndler-ID","invalidFormat":"Die H\xe4ndler-ID hat ein ung\xfcltiges Format. Muss eine UUIDv4 sein","required":"H\xe4ndler-ID ist erforderlich"}},"certificate":{"placeholder":"W\xe4hlen Sie eine Zertifikatsdatei (.p12)","error":{"title":"Zertifikatsfehler","message":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","general":"Beim Lesen des Zertifikats ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","required":"Zertifikatsdatei ist erforderlich","ERROR_INVALID_INPUT":"Zertifikatsdatei und Passwort sind erforderlich","ERROR_INVALID_UNKNOWN":"Bei der Zertifikatsvalidierung ist etwas schiefgelaufen. Bitte versuchen Sie es erneut.","ERROR_INVALID_CERTIFICATE_FORMAT":"Ung\xfcltiges Zertifikatsformat","ERROR_INVALID_PASSPHRASE":"Ung\xfcltiges Passwort","ERROR_INVALID_ISSUER_COUNTRY":"Ung\xfcltiges Herkunftsland des Ausstellers","ERROR_INVALID_ISSUER_ORGANIZATION":"Ung\xfcltige Herkunftsorganisation des Ausstellers","ERROR_INVALID_EXPIRY_DATE":"Ung\xfcltiges Ablaufdatum","ERROR_CERTIFICATE_EXPIRED":"Zertifikat abgelaufen","ERROR_CERTIFICATE_NOT_YET_VALID":"Zertifikat noch nicht g\xfcltig"},"success":{"title":"Zertifikat erfolgreich","message":"Zertifikat wurde erfolgreich gelesen"},"password":{"label":"Zertifikatspasswort","helpText":"Das Passwort f\xfcr die Zertifikatsdatei"}}}}}'),t=JSON.parse('{"twint":{"name":"TWINT payment","title":"TWINT payment","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT credentials","descriptionTextModule":"TWINT is a Swiss payment app that allows you to pay in stores, online, and transfer money to friends and family."},"settings":{"button":{"save":"Save","testing":"Verifying credentials ..."},"testCredentials":{"error":{"title":"Credential Error","message":"Credential configuration is invalid. Please check again: merchant ID, certificate and environment (mode)"}},"merchantId":{"label":"Merchant ID","placeholder":"Enter your merchant ID","helpText":"The merchant ID provided by TWINT","error":{"title":"Merchant ID","invalidFormat":"Merchant ID has an invalid format. Has to be a UUIDv4","required":"Merchant ID is required"}},"certificate":{"placeholder":"Select a certificate file (.p12)","error":{"title":"Certificate Error","message":"There was an error reading the certificate. Please try again.","general":"There was an error reading the certificate. Please try again.","required":"Certificate file is required","ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Something went wrong with the certificate validation. Please try again.","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid passphrase","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate not yet valid"},"success":{"title":"Certificate Success","message":"Reading certificate successful"},"password":{"label":"Certificate Password","helpText":"The password for the certificate file"}}},"order":{"stateCard":{"showTransactionLogModal":"Show transaction logs"}}}}');Shopware.Locale.extend("de-DE",e),Shopware.Locale.extend("en-GB",t);let n=Shopware.Classes.ApiService;class i extends n{constructor(e,t,n="twint"){super(e,t,n)}uploadFile(e,t){let n=this.getBasicHeaders();n["Content-Type"]="multipart/form-data";let i=new FormData;return i.append("file",e),i.append("password",t),this.httpClient.post("_actions/twint/extract-pem",i,{headers:n})}}let r=Shopware.Classes.ApiService;class a extends r{constructor(e,t,n="twint"){super(e,t,n)}validateCredential(e){let t=this.getBasicHeaders();return this.httpClient.post("_actions/twint/validate-api-credential",e,{headers:t}).then(e=>r.handleResponse(e))}}let{Application:s}=Shopware,o=s.getContainer("init").httpClient,l=Shopware.Service("loginService");s.addServiceProvider("twintFileUploadService",()=>new i(o,l)),s.addServiceProvider("TwintPaymentSettingsService",e=>new a(o,l)),d(905);let{Component:c,Mixin:u}=Shopware;c.register("twint-certificate",{template:Shopware.Feature.isActive("v6.6.0.0")?'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @update:value="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword"\n                required\n        >\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n':'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @change="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword">\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n',mixins:[u.getByName("notification")],inject:["feature"],data(){return{currentPassword:null,currentCertFile:null}},methods:{onFileChange(e){this.currentCertFile=e,this.extractPem()},updatePassword(e){this.extractPem()},extractPem(){let e=Shopware.Service("twintFileUploadService");this.currentCertFile&&this.currentPassword&&0!==this.currentPassword.length&&e.uploadFile(this.currentCertFile,this.currentPassword??"").then(e=>{this.updateCertificate(e.data.data),this.createNotification({title:this.$tc("twint.settings.certificate.success.title"),message:this.$tc("twint.settings.certificate.success.message"),growl:!0}).then(e=>{})}).catch(e=>{if(400===e.response.status){let t=e.response.data.errorCode;return this.createNotificationError({title:this.$tc("twint.settings.certificate.error.title"),message:this.$tc("twint.settings.certificate.error."+t),growl:!0})}this.createNotificationError({title:this.$tc("twint.settings.certificate.error.title"),message:this.$tc("twint.settings.certificate.error.general"),growl:!0})})},updateCertificate(e){if(this.feature.isActive("v6.6.0.0")){this.$emit("update:value",e);return}this.$emit("input",e)}}}),d(613),d(711),d(683),Shopware.Component.override("sw-order-details-state-card",{template:'{% block sw_order_detail_state_card_state %}\n    {% parent %}\n    <hr class="sw-order-detail-state-card__divider">\n    <div class="w-100 transaction-log-row">\n        <label class="sw-order-detail-state-card__label">\n            {{ $tc(\'twint.name\') }}\n        </label>\n        <sw-external-link\n                icon="regular-long-arrow-right"\n                @click="onShowTransactionLogModal"\n        >\n            {{ $tc(\'twint.order.stateCard.showTransactionLogModal\') }}\n        </sw-external-link>\n    </div>\n{% endblock %}\n'}),Shopware.Component.override("sw-order-detail",{template:"{% block sw_order_detail %}\n    {% parent %}\n{% endblock %}\n"})}()})();
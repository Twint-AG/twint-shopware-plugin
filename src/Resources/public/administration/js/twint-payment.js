!function(e){function t(t){for(var r,n,o=t[0],a=t[1],c=0,s=[];c<o.length;c++)n=o[c],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&s.push(i[n][0]),i[n]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(l&&l(t);s.length;)s.shift()()}var r={},n={"twint-payment":0},i={"twint-payment":0};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[];n[e]?t.push(n[e]):0!==n[e]&&{0:1}[e]&&t.push(n[e]=new Promise((function(t,r){for(var i="static/css/"+({}[e]||e)+".css",a=o.p+i,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var l=(f=c[s]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(l===i||l===a))return t()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){var f;if((l=(f=u[s]).getAttribute("data-href"))===i||l===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css";d.onerror=d.onload=function(i){if(d.onerror=d.onload=null,"load"===i.type)t();else{var o=i&&("load"===i.type?"missing":i.type),c=i&&i.target&&i.target.href||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=c,delete n[e],d.parentNode.removeChild(d),r(s)}},d.href=a,document.head.appendChild(d)})).then((function(){n[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=a);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"static/js/"+{0:"251e76d53c1ad4d25a04",1:"a561c28ca804b53e5c9a"}[e]+".js"}(e);var l=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(u);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}i[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:s})}),12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=(window.__sw__.assetPath + '/bundles/twintpayment/'),o.oe=function(e){throw console.error(e),e};var a=this["webpackJsonpPlugintwint-payment"]=this["webpackJsonpPlugintwint-payment"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=c;o(o.s="I+oZ")}({"2Puq":function(e,t,r){var n=r("ncrE");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("0cbb2e34",n,!0,{})},"3g9p":function(e,t,r){Shopware.Component.register("twint-payment-plugin-icon",(function(){return r.e(0).then(r.bind(null,"FdAP"))})),Shopware.Component.register("twint-settings",(function(){return r.e(1).then(r.bind(null,"DobE"))})),Shopware.Module.register("twint-payment",{type:"plugin",name:"TwintPayment",title:"twint.general.mainMenuItemGeneral",description:"twint.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routeMiddleware:function(e,t){e(t)},routes:{index:{component:"twint-settings",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:[{name:"twint-payment",to:"twint.payment.index",label:"twint.general.mainMenuItemGeneral",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1}]})},"6D7V":function(e){e.exports=JSON.parse('{"twint":{"title":"TWINT payment configurations","general":{"mainMenuItemGeneral":"TWINT","descriptionTextModule":"TWINT is a Swiss payment app that allows you to pay in stores, online, and transfer money to friends and family."},"settings":{"titleSuccess":"Success","test":"Test Credentials","save":"Save","titleError":"Error","messageErrorRequiredMerchantID":"Merchant ID is required","messageErrorInvalidMerchantID":"Merchant ID has an invalid format. Has to be a UUIDv4","messageErrorRequiredCertificate":"Certificate is required before saving","messageTestSuccess":"Credential configuration is valid. You can save it now.","messageTestError":"Credential configuration is invalid. Please check again: merchant ID, certificate and environment (mode)"},"validation":{"errorTitle":"TWINT configuration error","errorMessage":"There was an error validating the TWINT certificate (selected file and password). Please try again or use a different certification."},"certificateErrorTitle":"Certificate Error","merchantErrorTitle":"Merchant ID","certificateSuccess":"Certificate is an valid TWINT certificate.","certificateLabel":"Certificate Password","certificateFileLabel":"Select a certificate file (.p12)","certificatePasswordHelpText":"The password for the certificate file is optional. If you have set a password for the certificate file, please enter it here.","certificateError":{"ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Something went wrong with the certificate validation. Please try again.","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid passphrase","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate not yet valid"}}}')},"I+oZ":function(e,t,r){"use strict";r.r(t);var n=r("fTAK"),i=r("6D7V");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Locale.extend("de-DE",n),Shopware.Locale.extend("en-GB",i);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,r,n,i=l(o);function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return a(this,o),i.call(this,e,t,r)}return t=o,(r=[{key:"uploadFile",value:function(e,t){var r=this.getBasicHeaders();r["Content-Type"]="multipart/form-data";var n=new FormData;return n.append("file",e),n.append("password",t),this.httpClient.post("_actions/twint/extract-pem",n,{headers:r})}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Shopware.Classes.ApiService);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=Shopware.Classes.ApiService,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(o,e);var t,r,n,i=y(o);function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return h(this,o),i.call(this,e,t,r)}return t=o,(r=[{key:"validateCredential",value:function(e){var t=this.getBasicHeaders();return this.httpClient.post("_actions/twint/validate-api-credential",e,{headers:t}).then((function(e){return b.handleResponse(e)}))}}])&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(b),E=Shopware.Application,T=E.getContainer("init").httpClient,R=Shopware.Service("loginService");E.addServiceProvider("twintFileUploadService",(function(){return new d(T,R)})),E.addServiceProvider("TwintPaymentSettingsService",(function(e){return new I(T,R)}));r("2Puq");var S=Shopware,_=S.Component,C=S.Mixin;_.register("twint-certificate",{template:Shopware.Feature.isActive("v6.6.0.0")?'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @update:value="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.certificateFileLabel\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.certificateLabel\')"\n                :help-text="$tc(\'twint.certificatePasswordHelpText\')"\n                @blur="updatePassword">\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n':'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @change="onFileChange"\n                required\n        >\n            <template #caption-label>\n                {{ $tc(\'twint.certificateFileLabel\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                class="twint-config-field"\n                :label="$tc(\'twint.certificateLabel\')"\n                :help-text="$tc(\'twint.certificatePasswordHelpText\')"\n                @blur="updatePassword">\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n',mixins:[C.getByName("notification")],inject:["feature"],data:function(){return{currentPassword:null,currentCertFile:null}},methods:{onFileChange:function(e){this.currentCertFile=e,this.extractPem()},updatePassword:function(e){this.extractPem()},extractPem:function(){var e,t=this,r=Shopware.Service("twintFileUploadService");this.currentCertFile&&r.uploadFile(this.currentCertFile,null!==(e=this.currentPassword)&&void 0!==e?e:"").then((function(e){t.updateCertificate(e.data.data),t.createNotification({title:"Success",message:t.$tc("twint.certificateSuccess"),growl:!0}).then((function(e){}))})).catch((function(e){if(400===e.response.status){var r=e.response.data.errorCode;return t.createNotificationError({title:t.$tc("twint.certificateErrorTitle"),message:t.$tc("twint.certificateError."+r),growl:!0})}t.createNotificationError({title:t.$tc("twint.certificateErrorTitle"),message:t.$tc("twint.validation.errorMessage"),growl:!0})}))},updateCertificate:function(e){this.feature.isActive("v6.6.0.0")?this.$emit("update:value",e):this.$emit("input",e)}}});r("pfrm"),r("3g9p")},P8hj:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=o[0],c={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(c):r.push(n[a]={id:a,parts:[c]})}return r}r.r(t),r.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),c=null,s=0,l=!1,u=function(){},f=null,d="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,r,i){l=r,f=i||{};var a=n(e,t);return v(a),function(t){for(var r=[],i=0;i<a.length;i++){var c=a[i];(s=o[c.id]).refs--,r.push(s)}t?v(a=n(e,t)):a=[];for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}}function v(e){for(var t=0;t<e.length;t++){var r=e[t],n=o[r.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](r.parts[i]);for(;i<r.parts.length;i++)n.parts.push(y(r.parts[i]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(i=0;i<r.parts.length;i++)a.push(y(r.parts[i]));o[r.id]={id:r.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function y(e){var t,r,n=document.querySelector("style["+d+'~="'+e.id+'"]');if(n){if(l)return u;n.parentNode.removeChild(n)}if(p){var i=s++;n=c||(c=m()),t=b.bind(null,n,i,!1),r=b.bind(null,n,i,!0)}else n=m(),t=I.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var w,g=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function b(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function I(e,t){var r=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),f.ssrId&&e.setAttribute(d,t.id),i&&(r+="\n/*# sourceURL="+i.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},fTAK:function(e){e.exports=JSON.parse('{"twint":{"title":"TWINT","general":{"mainMenuItemGeneral":"TWINT","descriptionTextModule":"TWINT is a Swiss payment app that allows you to pay in stores, online, and transfer money to friends and family."},"settings":{"titleSuccess":"Success","test":"Test Credentials","save":"Save","titleError":"Error","messageErrorRequiredMerchantID":"Merchant ID is required","messageErrorInvalidMerchantID":"Merchant ID has an invalid format. Has to be a UUIDv4","messageErrorRequiredCertificate":"Certificate is required before saving","messageTestSuccess":"Credential configuration is valid. You can save it now.","messageTestError":"Credential configuration is invalid. Please check again: merchant ID, certificate and environment (mode)"},"validation":{"errorTitle":"TWINT configuration error","errorMessage":"There was an error validating the TWINT certificate (selected file and password). Please try again or use a different certification."},"certificateErrorTitle":"Certificate Error","merchantErrorTitle":"Merchant ID","certificateSuccess":"Certificate is an valid TWINT certificate.","certificateLabel":"Certificate Password","certificateFileLabel":"Select a certificate file (.p12)","certificatePasswordHelpText":"The password for the certificate file is optional. If you have set a password for the certificate file, please enter it here.","certificateError":{"ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Something went wrong with the certificate validation. Please try again.","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid passphrase","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate not yet valid"}}}')},ncrE:function(e,t,r){},pfrm:function(e,t){var r=Shopware,n=r.Component,i=r.Mixin;n.extend("twint-merchant-id","sw-text-field",{mixins:[i.getByName("notification")],methods:{onChange:function(e){this.$super("onChange",e),this.isValidUUIDv4(e.target.value)||this.createNotificationError({title:this.$tc("twint.merchantErrorTitle"),message:this.$tc("twint.errors.invalidUUIDv4")})},isValidUUIDv4:function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}})}});
//# sourceMappingURL=twint-payment.js.map
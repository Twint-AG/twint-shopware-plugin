/*! For license information please see twint-payment.js.LICENSE.txt */
!function(t){function e(e){for(var n,r,o=e[0],a=e[1],s=0,l=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);l.length;)l.shift()()}var n={},r={"twint-payment":0},i={"twint-payment":0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[];r[t]?e.push(r[t]):0!==r[t]&&{0:1}[t]&&e.push(r[t]=new Promise((function(e,n){for(var i="static/css/"+({}[t]||t)+".css",a=o.p+i,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(d=s[l]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===i||c===a))return e()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){var d;if((c=(d=u[l]).getAttribute("data-href"))===i||c===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css";f.onerror=f.onload=function(i){if(f.onerror=f.onload=null,"load"===i.type)e();else{var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||a,l=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=s,delete r[t],f.parentNode.removeChild(f),n(l)}},f.href=a,document.head.appendChild(f)})).then((function(){r[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(t){return o.p+"static/js/"+{0:"7b8ba551d1f8d9a2a0df",1:"8dd845bd49b72ffc4471",2:"6f00888913bafd551cb4"}[t]+".js"}(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=(window.__sw__.assetPath + '/bundles/twintpayment/'),o.oe=function(t){throw console.error(t),t};var a=this["webpackJsonpPlugintwint-payment"]=this["webpackJsonpPlugintwint-payment"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=s;o(o.s="I+oZ")}({"+3/9":function(t){t.exports=JSON.parse('{"twint":{"name":"Paiement TWINT","title":"Paiement TWINT","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"Identifiants TWINT"},"settings":{"button":{"save":"Enregistrer","testing":"Vérification des identifiants..."},"testCredentials":{"error":{"title":"Erreur d’identifiants","message":"Identifiants invalides. Veuillez vérifier à nouveau: UUID de votre commerce, certificat et environnement (mode)"}},"storeUuid":{"label":"UUID de votre commerce","placeholder":"Saisissez l’UUID de votre commerce","helpText":"L’UUID de votre commerce est fourni par TWINT","error":{"title":"UUID de votre commerce","invalidFormat":"UUID de votre commerce invalide. L’UUID de votre commerce doit être un UUIDv4","required":"L’UUID de votre commerce est requis"}},"certificate":{"placeholder":"Télécharger un fichier de certificat (.p12)","error":{"title":"Certificat invalide","message":"Une erreur s’est produite lors de la lecture du certificat. Veuillez réessayer","general":"Une erreur s’est produite lors de la lecture du certificat. Veuillez réessayer","required":"Le fichier de certificat est requis","invalid":"Le certificat est invalide","ERROR_INVALID_INPUT":"Le fichier de certificat et le mot de passe sont requis","ERROR_INVALID_UNKNOWN":"Le certificat ne peut pas être validé. Veuillez réessayer","ERROR_INVALID_CERTIFICATE_FORMAT":"Format du certificat invalide","ERROR_INVALID_PASSPHRASE":"Mot de passe invalide","ERROR_INVALID_ISSUER_COUNTRY":"Pays émetteur invalide","ERROR_INVALID_ISSUER_ORGANIZATION":"Organisation émettrice invalide","ERROR_INVALID_EXPIRY_DATE":"Date d’expiration invalide","ERROR_CERTIFICATE_EXPIRED":"Certificat expiré","ERROR_CERTIFICATE_NOT_YET_VALID":"Le certificat n’est pas encore valide"},"success":{"title":"Validation du certificat réussie","message":"Votre certificat a été validé avec succès"},"password":{"label":"Mot de passe du certificat","helpText":"Saisissez le mot de passe du certificat","error":"Mot de passe du certificat est requis"},"notice":{"label":"Certificat crypté et enregistré"},"button":{"label":"Télécharger un nouveau certificat"}}},"order":{"stateCard":{"label":"Le paiement a été traité par TWINT","showTransactionLogModal":"Afficher les journaux de transactions TWINT"},"transactionLog":{"cardTitle":"Journal des transactions","list":{"title":"Transactions","columns":{"createdAt":"Créée à","orderID":"ID de la commande","apiMethod":"Méthode API","soapAction":"SOAP action","order":"Statut de la commande","transaction":"ID de la transaction de la commande","request":"Demande","response":"Réponse","soapRequest":"Request","soapResponse":"Response","exception":"Exception","payment":"Statut du paiement","action":{"view":"Voir les détails"}},"modal":{"title":"Détails du journal","close":"Fermer","soapMethod":"Méthode SOAP"}}},"reversalHistory":{"cardTitle":"Historique des annulations","columns":{"amount":"Montant","currency":"Monnaie","reason":"Note","createdAt":"Créée à"}},"refundAction":{"cardTitle":"Remboursement","reason":{"label":"Note","placeholder":"Ajouter une note à ce remboursement"},"refundAmount":{"label":"Montant","helpText":"Le montant du remboursement ne peut excéder le montant total de la commande"},"confirmButton":{"text":"Exécuter"}}},"refund":{"modal":{"title":"Créer nouveau remboursement"},"buttons":{"refund":{"label":"Refund"}},"refundable":{"title":"Montant total restant à rembourser","notice":"Montant total automatiquement ajusté au montant maximal du montant du remboursement.","fullRefundNotice":"No refundable amount left for this order "},"error":{"title":"Erreur de remboursement","negativeAmount":"Le montant à rembourser doit être supérieur à 0","invalidMoneyFormat":"Montant invalide","exceedAmount":"Le montant total ne doit pas dépasser le montant maximal remboursable"}}},"sw-order":{"detail":{"twint":"TWINT"}}}')},"+Nbo":function(t,e){var n=Shopware.Data.Criteria;Shopware.Component.override("sw-order-detail-details",{inject:["repositoryFactory","acl"],data:function(){return{twintCustomFieldSetName:"twint_payment_custom_field_set"}},methods:{createdComponent:function(){this.$super("createdComponent")}},computed:{customFieldSetCriteria:function(){var t=new n(1,null);return t.addFilter(n.not("AND",[n.equals("name",this.twintCustomFieldSetName)])),t.addFilter(n.equals("relations.entityName","order")),t}}})},"2Puq":function(t,e,n){var r=n("ncrE");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("0cbb2e34",r,!0,{})},"3g9p":function(t,e,n){Shopware.Component.register("twint-payment-plugin-icon",(function(){return n.e(0).then(n.bind(null,"FdAP"))})),Shopware.Component.register("twint-settings",(function(){return n.e(2).then(n.bind(null,"DobE"))})),Shopware.Component.register("express-settings",(function(){return n.e(1).then(n.bind(null,"WR6I"))})),Shopware.Module.register("twint-payment",{type:"plugin",name:"TwintPayment",title:"twint.title",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routeMiddleware:function(t,e){t(e)},routes:{index:{component:"twint-settings",path:"index",meta:{parentPath:"sw.settings.index.plugins"}},express:{component:"express-settings",path:"express",meta:{parentPath:"sw.settings.index.plugins"}}},settingsItem:[{name:"twint-payment-express",to:"twint.payment.express",label:"twint.express.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1},{name:"twint-payment",to:"twint.payment.index",label:"twint.general.menuItem",group:"plugins",iconComponent:"twint-payment-plugin-icon",backgroundEnabled:!1}]})},"6D7V":function(t){t.exports=JSON.parse('{"twint":{"name":"TWINT payment","title":"TWINT payment","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT credentials"},"settings":{"button":{"save":"Save","testing":"Verifying the credentials..."},"testCredentials":{"error":{"title":"Credentials error","message":"Invalid credentials. Please check again: Store UUID, certificate and environment (mode)"}},"storeUuid":{"label":"Store UUID","placeholder":"Enter your Store UUID","helpText":"The Store UUID is provided by TWINT","error":{"title":"Store UUID","invalidFormat":"Invalid Store UUID. Store UUID needs to be a UUIDv4","required":"Store UUID is required"}},"certificate":{"placeholder":"Upload a certificate file (.p12)","error":{"title":"Certificate","message":"An error occurred reading the certificate. Please try again","general":"An error occurred reading the certificate. Please try again","required":"Certificate file is required","invalid":"Certificate is invalid","ERROR_INVALID_INPUT":"Certificate file and password are required","ERROR_INVALID_UNKNOWN":"Certificate cannot be validated. Please try again","ERROR_INVALID_CERTIFICATE_FORMAT":"Invalid certificate format","ERROR_INVALID_PASSPHRASE":"Invalid password","ERROR_INVALID_ISSUER_COUNTRY":"Invalid issuer country","ERROR_INVALID_ISSUER_ORGANIZATION":"Invalid issuer organization","ERROR_INVALID_EXPIRY_DATE":"Invalid expiry date","ERROR_CERTIFICATE_EXPIRED":"Certificate expired","ERROR_CERTIFICATE_NOT_YET_VALID":"Certificate is not yet valid"},"success":{"title":"Certificate validation successful","message":"Your certificate is successfully validated"},"password":{"label":"Certificate password","error":"Certificate password is required","helpText":"Enter the certificate password"},"notice":{"label":"Certificate encrypted and stored"},"button":{"label":"Upload new certificate"}}},"order":{"stateCard":{"label":"Payment has been processed by TWINT","showTransactionLogModal":"Show TWINT transaction logs"},"transactionLog":{"cardTitle":"Transaction logs","list":{"title":"Transactions","columns":{"createdAt":"Created at","apiMethod":"API method","soapAction":"SOAP action","orderID":"Order ID","order":"Order status","transaction":"Order transaction ID","request":"Request","response":"Response","soapRequest":"Request","soapResponse":"Response","exception":"Exception","payment":"Payment status","action":{"view":"View details"}},"modal":{"title":"Log details","close":"Close","soapMethod":"Soap method"}}},"reversalHistory":{"cardTitle":"Reversal history","columns":{"amount":"Amount","currency":"Currency","reason":"Note","createdAt":"Created at"}},"refundAction":{"cardTitle":"Refund","reason":{"label":"Note","placeholder":"Add note to this refund"},"refundAmount":{"label":"Amount","helpText":"The refund amount cannot exceed the total order amount"},"confirmButton":{"text":"Execute"}}},"refund":{"modal":{"title":"Create new refund"},"buttons":{"refund":{"label":"Refund"}},"refundable":{"title":"Total refundable amount left","notice":"Total amount automatically adjusted to the maximum refund amount.","fullRefundNotice":"No refundable amount left for this order"},"error":{"title":"Refund error","negativeAmount":"Amount to refund should be greater than 0","invalidMoneyFormat":"Invalid amount","exceedAmount":"Total amount should not exceed the maximum refundable amount"}}},"sw-order":{"detail":{"twint":"TWINT"}}}')},"AVI/":function(t){t.exports=JSON.parse('{"twint":{"title":"TWINT Bezahlung","name":"TWINT Bezahlung","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"TWINT Zugangsdaten"},"settings":{"button":{"save":"Speichern","testing":"Zugangsdaten überprüfen …"},"testCredentials":{"error":{"title":"Fehler bei den Zugangsdaten","message":"Ungültige Zugangsdaten. Bitte überprüfen: UUID Ihres Stores, Zertifikat und Umfeld (Modus)"}},"storeUuid":{"label":"UUID Ihres Stores","placeholder":"UUID Ihres Stores eingeben","helpText":"Die UUID Ihres Stores wird von TWINT bereitgestellt","error":{"title":"UUID Ihres Stores","invalidFormat":"Ungültige UUID Ihres Stores. UUID Ihres Stores muss eine UUIDv4 sein","required":"UUID Ihres Stores erforderlich"}},"certificate":{"placeholder":"Zertifikatsdatei hochladen (.p12)","error":{"title":"Ungültiges Zertifikat","message":"Fehler beim Lesen des Zertifikats. Bitte erneut versuchen","general":"Fehler beim Lesen des Zertifikats. Bitte erneut versuchen","required":"Zertifikatsdatei erforderlich","invalid":"Zertifikat ist ungültig","ERROR_INVALID_INPUT":"Zertifikatsdatei und Passwort erforderlich","ERROR_INVALID_UNKNOWN":"Zertifikat kann nicht validiert werden. Bitte erneut versuchen","ERROR_INVALID_CERTIFICATE_FORMAT":"Zertifikatsformat ungültig","ERROR_INVALID_PASSPHRASE":"Passwort ungültig","ERROR_INVALID_ISSUER_COUNTRY":"Land des Herausgebers ungültig","ERROR_INVALID_ISSUER_ORGANIZATION":"Organisation des Herausgebers ungültig","ERROR_INVALID_EXPIRY_DATE":"Verfalldatum ungültig","ERROR_CERTIFICATE_EXPIRED":"Zertifikat abgelaufen","ERROR_CERTIFICATE_NOT_YET_VALID":"Zertifikat noch nicht gültig"},"success":{"title":"Zertifikat erfolgreich validiert","message":"Ihr Zertifikat wurde erfolgreich validiert"},"password":{"label":"Zertifikatspasswort","helpText":"Zertifikatspasswort erfassen","error":"Zertifikatsdatei erforderlich"},"notice":{"label":"Zertifikat verschlüsselt und gespeichert"},"button":{"label":"Neues Zertifikat hochladen"}}},"order":{"stateCard":{"label":"Zahlung wurde von TWINT bearbeitet","showTransactionLogModal":"TWINT Transaktionsverlauf (Logs) anzeigen"},"transactionLog":{"cardTitle":"Transaktionsverlauf (Logs)","list":{"title":"Transaktionen","columns":{"createdAt":"Erstellt am","apiMethod":"API-Methode","soapAction":"SOAP action","orderID":"Order ID","order":"Bestellstatus","transaction":"Transaktions-Nummer","request":"Anfrage","response":"Antwort","soapRequest":"Anfrage","soapResponse":"Antwort","exception":"Ausnahme","payment":"Zahlungsstatus","action":{"view":"Details ansehen"}},"modal":{"title":"Verlaufsdetails","close":"Schliessen","soapMethod":"Soap-Methode"}}},"reversalHistory":{"cardTitle":"Stornierungsverlauf","columns":{"amount":"Betrag","currency":"Währung","reason":"Hinweis","createdAt":"Erstellt am"}},"refundAction":{"cardTitle":"Rückerstattung","reason":{"label":"Hinweis","placeholder":"Rückerstattung mit Hinweis versehen"},"refundAmount":{"label":"Betrag","helpText":"Der Rückerstattungsbetrag darf den Totalbetrag der Bestellung nicht überschreiten"},"confirmButton":{"text":"Ausführen"}}}},"refund":{"modal":{"title":"Neue Rückerstattung erstellen"},"buttons":{"refund":{"label":"Rückerstattung"}},"refundable":{"title":"Total Restbetrag Rückerstattung","notice":"Automatische Anpassung des Totalbetrags an den Höchstbetrag der Rückerstattung","fullRefundNotice":"No refundable amount left for this order"},"error":{"title":"Fehler bei der Rückerstattung","negativeAmount":"Der zu erstattende Betrag sollte grösser als 0 sein","invalidMoneyFormat":"Ungültige Menge","exceedAmount":"Der Gesamtbetrag sollte den erstattungsfähigen Höchstbetrag nicht überschreiten"}},"sw-order":{"detail":{"twint":"TWINT"}}}')},"Eia/":function(t){t.exports=JSON.parse('{"twint":{"name":"Pagamento TWINT","title":"Pagamento TWINT","express":{"title":"TWINT Express Checkout","menuItem":"TWINT Express Checkout"},"general":{"menuItem":"Credenziali TWINT"},"settings":{"button":{"save":"Salva","testing":"Verifica delle credenziali in corso..."},"testCredentials":{"error":{"title":"Errore credenziali","message":"Credenziali non valide. Ti preghiamo di ricontrollare: UUID del suo negozio, certificato e ambiente (modalità)"}},"storeUuid":{"label":"UUID del suo negozio","placeholder":"Inserisci l’UUID del suo negozio","helpText":"L’UUID del suo negozio è fornito da TWINT.","error":{"title":"UUID del suo negozio","invalidFormat":"UUID del suo negozio non valido. L’UUID del suo negozio deve essere un UUIDv4.","required":"L’UUID del suo negozio è necessario."}},"certificate":{"placeholder":"Carica un file del certificato (.p12)","error":{"title":"Certificato non valido","message":"Si è verificato un errore durante la lettura del certificato. Ti preghiamo di riprovare","general":"Si è verificato un errore durante la lettura del certificato. Ti preghiamo di riprovare","required":"Il file del certificato è necessario","invalid":"Il certificato non è valido","ERROR_INVALID_INPUT":"Il file del certificato e la password sono necessari.","ERROR_INVALID_UNKNOWN":"Il certificato non può essere convalidato. Ti preghiamo di riprovare.","ERROR_INVALID_CERTIFICATE_FORMAT":"Formato certificato non valido","ERROR_INVALID_PASSPHRASE":"Password non valida","ERROR_INVALID_ISSUER_COUNTRY":"Paese emittente non valido","ERROR_INVALID_ISSUER_ORGANIZATION":"Organizzazione emittente non valida","ERROR_INVALID_EXPIRY_DATE":"Data di scadenza non valida","ERROR_CERTIFICATE_EXPIRED":"Certificato scaduto","ERROR_CERTIFICATE_NOT_YET_VALID":"Il certificato non è ancora valido."},"success":{"title":"Convalida certificato andata a buon fine","message":"Il tuo certificato è stato convalidato con successo."},"password":{"label":"Password del certificato","helpText":"Si prega di inserire la password del certificato","error":"Password del certificato è necessario"},"notice":{"label":"Certificato crittografato e archiviato"},"button":{"label":"Carica nuovo certificato"}}},"order":{"stateCard":{"label":"Il pagamento è stato processato da TWINT","showTransactionLogModal":"Mostra log transazioni TWINT"},"transactionLog":{"cardTitle":"Log transazioni","list":{"title":"Transactions","columns":{"createdAt":"Creato a","orderID":"ID ordine","apiMethod":"Metodo API","soapAction":"SOAP action","order":"Stato dell’ordine","transaction":"ID transazione ordine","request":"Richiesta","response":"Risposta","soapRequest":"Request","soapResponse":"Response","exception":"Exception","payment":"Stato del pagamento","action":{"view":"Visualizza dettagli"}},"modal":{"title":"Dettagli del log","close":"Chiudi","soapMethod":"Metodo Soap"}}},"reversalHistory":{"cardTitle":"Cronologia storni","columns":{"amount":"Importo","currency":"Valuta","reason":"Nota","createdAt":"Creato a"}},"refundAction":{"cardTitle":"Rimborso","reason":{"label":"Nota","placeholder":"Aggiungi nota a questo rimborso"},"refundAmount":{"label":"Importo","helpText":"L’importo del rimborso non può superare l’importo totale dell’ordine."},"confirmButton":{"text":"Esegui"}}},"refund":{"modal":{"title":"Crea nuovo rimborso"},"buttons":{"refund":{"label":"Refund"}},"refundable":{"title":"Importo totale rimborsabile rimanente","notice":"Importo totale automaticamente adattato all’importo massimo del rimborso.","fullRefundNotice":"No refundable amount left for this order"},"error":{"title":"Errore rimborso","negativeAmount":"L\'importo da rimborsare deve essere maggiore di 0","invalidMoneyFormat":"Importo non valido","exceedAmount":"L\'importo totale non deve superare l\'importo massimo rimborsabile"}}},"sw-order":{"detail":{"twint":"TWINT"}}}')},"F/fj":function(t,e){var n=Shopware,r=n.Component,i=n.Mixin;r.extend("twint-store-uuid","sw-text-field",{mixins:[i.getByName("notification")],methods:{onChange:function(t){this.$super("onChange",t),this.isValidUUIDv4(t.target.value)||this.createNotificationError({title:this.$tc("twint.settings.storeUuid.error.title"),message:this.$tc("twint.settings.storeUuid.error.invalidFormat")})},isValidUUIDv4:function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}}})},FGVw:function(t,e){var n=Shopware,r=n.Component;n.Mixin;r.override("sw-file-input",{methods:{setSelectedFile:function(t){this.selectedFile=t,this.$emit("update:value",this.selectedFile),this.$emit("change",this.selectedFile)}}})},FUWB:function(t,e,n){},"I+oZ":function(t,e,n){"use strict";n.r(e);var r=n("AVI/"),i=n("6D7V"),o=n("+3/9"),a=n("Eia/");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===s(o)?o:String(o)),r)}var i,o}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Shopware.Locale.extend("en-GB",i),Shopware.Locale.extend("de-CH",r),Shopware.Locale.extend("fr-CH",o),Shopware.Locale.extend("it-CH",a);var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(o,t);var e,n,r,i=d(o);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return l(this,o),i.call(this,t,e,n)}return e=o,(n=[{key:"uploadFile",value:function(t,e){var n=this.getBasicHeaders();n["Content-Type"]="multipart/form-data";var r=new FormData;return r.append("file",t),r.append("password",e),this.httpClient.post("_actions/twint/extract-pem",r,{headers:n})}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Shopware.Classes.ApiService);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===h(o)?o:String(o)),r)}var i,o}function w(t,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=Shopware.Classes.ApiService,I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(o,t);var e,n,r,i=y(o);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return g(this,o),i.call(this,t,e,n)}return e=o,(n=[{key:"validateCredentials",value:function(t){var e=this.getBasicHeaders();return this.httpClient.post("_actions/twint/validate-api-credential",t,{headers:e}).then((function(t){return S.handleResponse(t)}))}}])&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(S);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===R(o)?o:String(o)),r)}var i,o}function A(t,e){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L(t);if(e){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=Shopware.Classes.ApiService,N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(o,t);var e,n,r,i=O(o);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"twint";return T(this,o),i.call(this,t,e,n)}return e=o,(n=[{key:"refund",value:function(t){var e=this.getBasicHeaders();return this.httpClient.post("_actions/twint/refund",t,{headers:e}).then((function(t){return C.handleResponse(t)}))}},{key:"orderStatus",value:function(t){var e=this.getBasicHeaders();return this.httpClient.get("_actions/twint/order/".concat(t,"/status"),{headers:e}).then((function(t){return C.handleResponse(t)}))}}])&&E(e.prototype,n),r&&E(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(C),P=Shopware.Application,D=P.getContainer("init").httpClient,k=Shopware.Service("loginService");P.addServiceProvider("twintFileUploadService",(function(){return new m(D,k)})),P.addServiceProvider("TwintPaymentSettingsService",(function(t){return new I(D,k)})),P.addServiceProvider("TwintPaymentService",(function(t){return new N(D,k)}));n("2Puq");function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(){U=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new T(i||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==e&&n.call(v,o)&&(h=v);var w=m.prototype=f.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==j(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},y(b.prototype),l(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function M(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var F=Shopware,$=F.Component,V=F.Mixin,q=Shopware.Classes.ShopwareError;$.register("twint-certificate",{template:'{% block twint_certificate_block %}\n    <div>\n        <sw-file-input\n                v-model="currentCertFile"\n                :allowed-mime-types="[\'application/x-pkcs12\']"\n                :maxFileSize="8*1024*1024"\n                @change="onFileChange"\n                required\n                :disabled="isDisabled"\n        >\n            <template #caption-label v-if="certificate == null || certificate == \'\'">\n                {{ $tc(\'twint.settings.certificate.placeholder\') }}\n            </template>\n\n            <template #caption-label v-if="certificate != null && certificate != \'\'">\n                {{ $tc(\'twint.settings.certificate.notice.label\') }}\n            </template>\n        </sw-file-input>\n\n        <sw-password-field\n                v-if="certificate == \'\' || certificate == null"\n                v-model:value="currentPassword"\n                :entity-collection="null"\n                :error="passwordError"\n                class="twint-config-field"\n                :label="$tc(\'twint.settings.certificate.password.label\')"\n                :help-text="$tc(\'twint.settings.certificate.password.helpText\')"\n                @blur="updatePassword"\n                autocomplete="off"\n                required\n                :disabled="isDisabled"\n        >\n            <template #suffix>\n                {% block twint_certificate_password_suffix_block %}\n                    <sw-icon name="regular-low-vision" size="22px"></sw-icon>\n                {% endblock %}\n            </template>\n        </sw-password-field>\n    </div>\n{% endblock %}\n',mixins:[V.getByName("notification")],inject:["feature","systemConfigApiService"],props:{disabled:{type:Boolean,default:!1}},data:function(){return{currentPassword:null,currentCertFile:null,passwordError:null,validatePassword:"",storeUuid:null,certificate:null,validated:null,buttonSelector:".sw-file-input__dropzone .sw-file-input__button"}},computed:{isDisabled:function(){return this.disabled}},created:function(){this.loadSettings(),this.registerValidator()},methods:{registerValidator:function(){var t=new CustomEvent("twint-add-validators",{detail:{method:this.validate,self:this}});document.dispatchEvent(t)},validate:function(t){var e=!0;return t.certificate||t.currentPassword&&0!==t.currentPassword.length||(t.createNotificationError({title:t.$tc("twint.settings.certificate.error.title"),message:t.$tc("twint.settings.certificate.password.error"),growl:!0}),e=!1),t.certificate||null!=t.currentCertFile||(t.createNotificationError({title:t.$tc("twint.settings.certificate.error.title"),message:t.$tc("twint.settings.certificate.error.required")}),e=!1),e},onFileChange:function(t){return this.certificate="",this.updateCertificate(),this.currentCertFile=t,!this.currentCertFile||this.currentPassword&&0!==this.currentPassword.length?this.currentCertFile?void this.extractPem():(this.passwordError=null,void this.$root.$emit("update-lock",!1)):(this.passwordError=new q({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"}),void this.$root.$emit("update-lock",!0))},updatePassword:function(t){!this.currentCertFile||this.currentPassword&&0!==this.currentPassword.length?this.currentCertFile&&(this.passwordError=null,this.extractPem()):(this.passwordError=new q({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"}),this.$root.$emit("update-lock",!0))},extractPem:function(){var t,e=this,n=Shopware.Service("twintFileUploadService");if(this.currentCertFile&&this.currentPassword&&0!==this.currentPassword.length){this.$refs.myInput;n.uploadFile(this.currentCertFile,null!==(t=this.currentPassword)&&void 0!==t?t:"").then((function(t){e.certificate=t.data.data,e.updateCertificate(),e.changeButtonText(),e.createNotification({title:e.$tc("twint.settings.certificate.success.title"),message:e.$tc("twint.settings.certificate.success.message"),growl:!0}).then((function(t){e.$root.$emit("update-lock",!1)}))})).catch((function(t){if(e.certificate="",e.changeButtonText(),400===t.response.status){var n=t.response.data.errorCode;return e.createNotificationError({title:e.$tc("twint.settings.certificate.error.title"),message:e.$tc("twint.settings.certificate.error."+n),growl:!0})}e.createNotificationError({title:e.$tc("twint.settings.certificate.error.title"),message:e.$tc("twint.settings.certificate.error.general"),growl:!0})}))}},updateCertificate:function(){this.feature.isActive("v6.6.0.0")?this.$emit("update:value",this.certificate):(this.$emit("input",this.certificate),this.changeButtonText())},loadSettings:function(){var t,e=this;return(t=U().mark((function t(){var n;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.systemConfigApiService.getValues("TwintPayment.settings");case 3:n=t.sent,Object.keys(n).length>0&&(e.storeUuid=n["TwintPayment.settings.storeUuid"],e.certificate=n["TwintPayment.settings.certificate"],e.validated=n["TwintPayment.settings.validated"]),e.changeButtonText(),e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){M(o,r,i,a,s,"next",t)}function s(t){M(o,r,i,a,s,"throw",t)}a(void 0)}))})()},changeButtonText:function(){this.button=document.querySelector(this.buttonSelector),this.button&&(null!=this.certificate&&""!==this.certificate?this.button.textContent=this.$tc("twint.settings.certificate.button.label"):this.button.textContent=this.$tc("global.sw-file-input.buttonChoose"))}}});n("FGVw"),n("F/fj"),n("3g9p"),n("yMVt");function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===B(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=Shopware,G=Z.Component,Y=Z.Mixin,J=Shopware.Component.getComponentHelper().mapState,K=Shopware.Data.Criteria,X=Shopware.Classes.ShopwareError;G.register("twint-payment-actions",{template:'<div class="sw-order-detail-twint">\n    <sw-container>\n        {% block sw_order_detail_twint_actions_row_reversal_form %}\n            <sw-card  v-if="canRefund" position-identifier="twint-details-actions" :title="$tc(\'twint.order.refundAction.cardTitle\')">\n                {% block sw_order_detail_twint_actions_rows %}\n                    <template #default>\n                        {% block sw_order_detail_twint_actions_row_primary %}\n                            <div class="twint-payment-actions__button-container">\n                                <span class="twint-refundable-amount__title" v-if="refundableAmount > 0">\n                                {{ $tc(\'twint.refund.refundable.title\') }}\n                                </span>\n                                <span class="twint-refundable-amount__notice" v-if="refundableAmount == 0">\n                                {{ $tc(\'twint.refund.refundable.fullRefundNotice\') }}\n                                </span>\n                                <sw-label v-if="refundableAmount > 0">{{ currencyFilter(refundableAmount, currency, decimalPrecision) }}</sw-label>\n                                <sw-button variant="primary"\n                                           size="small"\n                                           :disabled="refundableAmount==0 || !acl.can(\'order.editor\')"\n                                           @click="showModal">\n                                    {{ $tc(\'twint.refund.buttons.refund.label\') }}\n                                </sw-button>\n                            </div>\n                            {% block twint_modal_refund %}\n                                <sw-modal variant="small"\n                                          :title="$tc(`twint.refund.modal.title`)" v-if="showRefundModal" @modal-close="onCloseModal">\n                                    {% block twint_refund_amount %}\n                                        <sw-number-field\n                                                {% if VUE3 %}\n                                                    v-model:value="refundAmount"\n                                                {% else %}\n                                                    v-model="refundAmount"\n                                                {% endif %}\n                                                numberType="float"\n                                                ref="refundAmountField"\n                                                :step="dynamicStep"\n                                                :digits="19"\n                                                :label="$tc(\'twint.order.refundAction.refundAmount.label\')"\n                                                :helpText="$tc(\'twint.order.refundAction.refundAmount.helpText\')"\n                                                :error="amountError"\n                                                @update:value="amountInputChanged"\n                                                {% if VUE3 %}\n                                                    @update:value="amountInputChanged"\n                                                {% else %}\n                                                    @change="amountInputChanged"\n                                                {% endif %}\n                                        >\n                                            <template #suffix>\n                                                {{ currency }}\n                                            </template>\n                                        </sw-number-field>\n                                    {% endblock %}\n\n                                    {% block twint_refund_reason %}\n                                        <sw-textarea-field\n                                                v-model:value="reason"\n                                                maxLength="127"\n                                                :label="$tc(\'twint.order.refundAction.reason.label\')"\n                                                :placeholder="$tc(\'twint.order.refundAction.reason.placeholder\')">\n                                        </sw-textarea-field>\n                                    {% endblock %}\n\n                                    {% block twint_refund_confirm_button %}\n                                        <template #modal-footer>\n                                            <sw-button variant="primary" :disabled="amountError || refundAmount<=0"\n                                                       @click="refund">\n                                                {{ $tc(\'twint.order.refundAction.confirmButton.text\') }}\n                                            </sw-button>\n                                        </template>\n                                    {% endblock %}\n\n                                    <sw-loader v-if="isLoading"></sw-loader>\n                                </sw-modal>\n                            {% endblock %}\n                        {% endblock %}\n                    </template>\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n        {% block sw_order_detail_twint_actions_row_reversal_history %}\n            <sw-card position-identifier="twint-details-actions-reversal-list" :title="$tc(\'twint.order.reversalHistory.cardTitle\')">\n                <template #grid>\n                    {% block sw_order_detail_twint_reversal_history_grid %}\n                        <sw-data-grid v-if="reversalHistory.length > 0" :data-source="reversalHistory"\n                                      :columns="paymentColumns"\n                                      :showActions="false"\n                                      :showSelection="false">\n                            <template #column-createdAt="{ item }">\n                                {{ dateFilter(item.createdAt) }}\n                            </template>\n                            <template #column-amount="{ item }">\n                                {{ currencyFilter(item.amount, item.currency, decimalPrecision)}}\n                            </template>\n                        </sw-data-grid>\n                    {% endblock %}\n                </template>\n            </sw-card>\n        {% endblock %}\n    </sw-container>\n</div>\n',inject:["repositoryFactory","acl","TwintPaymentService","orderStateMachineService"],mixins:[Y.getByName("notification"),Y.getByName("sw-inline-snippet")],props:{order:{type:Object,required:!0},orderId:{type:String,required:!0},totalAmount:{type:Number,required:!0},currency:{type:String,required:!0},decimalPrecision:{type:String,required:!0}},data:function(){return{reversalId:"",reversalHistory:[],refundAmount:null,totalOrderAmount:0,refundedAmount:0,reason:"",refundableAmount:0,isLoading:!1,showRefundModal:!1,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0,stateType:"order_transaction",transaction:null,currentActionName:null,amountError:null}},created:function(){this.createdComponent()},computed:z(z({},J("swOrderDetail",["order","versionContext","orderAddressIds","editing","loading"])),{},{reversalHistoryRepository:function(){return this.repositoryFactory.create("twint_reversal_history")},paymentColumns:function(){return[{property:"amount",label:this.$tc("twint.order.reversalHistory.columns.amount"),rawData:!0},{property:"reason",label:this.$tc("twint.order.reversalHistory.columns.reason"),rawData:!0},{property:"createdAt",label:this.$tc("twint.order.reversalHistory.columns.createdAt"),rawData:!0}]},dateFilter:function(){return Shopware.Filter.getByName("date")},canRefund:function(){for(var t=0;t<this.order.transactions.length;t+=1)if(["paid","paid_partially","refunded_partially","refunded"].includes(this.order.transactions[t].stateMachineState.technicalName))return!0;return!1},currencyFilter:function(){return Shopware.Filter.getByName("currency")},dynamicStep:function(){return this.decimalPrecision<0?.01:Math.pow(10,-this.decimalPrecision)},amountError:function(){return this.amountError?this.amountError:null}}),methods:{createdComponent:function(){var t;this.getReversalHistoryList();for(var e=0;e<this.order.transactions.length;e+=1)["cancelled","failed"].includes(this.order.transactions[e].stateMachineState.technicalName)||(this.transaction=this.order.transactions[e]);this.transaction=this.order.transactions.last();var n=(null===(t=this.order)||void 0===t?void 0:t.customFields)||{},r=JSON.parse(n.twint_api_response||"{}");this.totalOrderAmount=this.totalAmount,null!=r&&r.amount&&(this.totalOrderAmount=r.amount.amount)},showModal:function(){this.resetRefundForm(),this.showRefundModal=!0},closeModal:function(){this.showRefundModal=""},onCloseModal:function(){this.showRefundModal=""},getReversalHistoryList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new K;e.addSorting(K.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addFilter(K.equals("order.id",this.orderId)),e.addAggregation(K.sum("refundedAmount","amount")),this.isLoading=!0,this.reversalHistoryRepository.search(e).then((function(e){var n,r;t.reversalHistory=e;var i=parseFloat(null==e||null===(n=e.aggregations)||void 0===n||null===(r=n.refundedAmount)||void 0===r?void 0:r.sum);t.isLoading=!1,t.refundableAmount=t.roundingFloat(t.totalOrderAmount-i,t.decimalPrecision)})).catch((function(){t.isLoading=!1}))},refund:function(){var t=this,e={orderId:this.orderId,amount:this.refundAmount,reason:this.reason};this.isLoading=!0,this.TwintPaymentService.refund(e).then((function(e){var n,r,i=null!==(n=e.success)&&void 0!==n&&n;t.currentActionName=null!==(r=e.action)&&void 0!==r?r:"",i?(t.showRefundModal=!1,t.getReversalHistoryList(),t.isLoading=!1,t.resetRefundForm(),t.$root.$emit("refund-finish"),t.updatePaymentStatus()):(t.isLoading=!1,t.createNotificationError({title:t.$tc("twint.refund.error.title"),message:e.error}))})).finally((function(e){t.isLoading=!1,t.showRefundModal=!1}))},resetRefundForm:function(){this.refundAmount=null,this.amountError=null,this.reason=""},roundingFloat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(Number(t).toFixed(e))},updatePaymentStatus:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.currentActionName){var r=this.orderStateMachineService.transitionOrderTransactionState(this.transaction.id,this.currentActionName,{documentIds:e,sendMail:n});r&&r.then((function(){t.TwintPaymentService.orderStatus(t.orderId).then((function(e){var n;null!==(n=e.success)&&void 0!==n&&n&&(t.$root.$emit("save-edits"),t.$root.$emit("refund-finish"))}))})).catch((function(e){t.createNotificationError({title:t.$tc("twint.refund.error.title"),message:e})})).finally((function(){t.currentActionName=null}))}},amountInputChanged:function(t){if(this.refundAmount=t,null===this.refundAmount||isNaN(this.refundAmount)||this.refundAmount<=0)this.amountError=new X({code:"zero",detail:this.$tc("twint.refund.error.negativeAmount")});else{var e=this.refundAmount.toString().split(".");if(2==e.length){var n=e[0].replace("-","").length,r=e[1]?e[1].length:0;(n+r>19||r>2)&&(this.amountError=new X({code:"wrongFormat",detail:this.$tc("twint.refund.error.invalidMoneyFormat")}))}t>this.refundableAmount?this.amountError=new X({code:"exceedAmount",detail:this.$tc("twint.refund.error.exceedAmount")}):this.amountError=null}}}});n("iZjG");function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nt(){nt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new T(i||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==e&&n.call(v,o)&&(h=v);var w=m.prototype=f.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Q(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},y(b.prototype),l(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function rt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var it=Shopware.Data.Criteria;Shopware.Component.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_extension %}\n    {% parent %}\n    <sw-tabs-item\n            v-if="isTwintOrder"\n            class="sw-order-detail__tab-twint"\n            :route="{ name: \'sw.order.detail.twint\', params: { id: $route.params.id } }"\n            :title="$tc(\'sw-order.detail.twint\')">\n        {{ $tc(\'sw-order.detail.twint\') }}\n    </sw-tabs-item>\n{% endblock %}',data:function(){return{isLoading:!1,pairings:null,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0}},methods:{createdComponent:function(){this.$super("createdComponent"),this.isLoading=!0,this.getPairingList(),this.$root.$on("save-edits",this.onSaveEdits)},getPairingList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new it;e.addSorting(it.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addAssociation("order"),e.addFilter(it.equals("order.id",this.orderId)),this.isLoading=!0,this.twintPairingRepository.search(e).then((function(e){t.pairings=e,t.isLoading=!1})).catch((function(){t.isLoading=!1}))},onSaveEdits:function(){var t,e=this;return(t=nt().mark((function t(){var n;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$super("onSaveEdits");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){rt(o,r,i,a,s,"next",t)}function s(t){rt(o,r,i,a,s,"throw",t)}a(void 0)}))})()}},destroyed:function(){this.$root.$off("save-edits")},computed:{twintPairingRepository:function(){return this.repositoryFactory.create("twint_pairing")},isTwintOrder:function(){var t,e,n,r=tt(null!==(t=null===(e=this.order)||void 0===e?void 0:e.transactions)&&void 0!==t?t:[]);try{for(r.s();!(n=r.n()).done;){if(n.value.paymentMethod.handlerIdentifier.includes("Twint"))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}}});n("+Nbo"),n("fKsf");function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ot(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ct=Shopware,ut=ct.Application,dt=ct.Mixin,ft=Shopware.Data.Criteria,pt=Shopware.Component.getComponentHelper(),mt=pt.mapState;pt.mapGetters;Shopware.Component.register("sw-order-detail-twint",{template:'{% block sw_order_detail_twint %}\n    <div class="sw-order-twint-detail">\n    <template>\n        <sw-card-view>\n            {% block sw_order_detail_twint_reversal_card %}\n                <twint-payment-actions\n                        :order="order"\n                        :orderId="orderId"\n                        :currency="order.currency.isoCode"\n                        :decimalPrecision="order.itemRounding.decimals"\n                        :totalAmount="order.amountTotal"\n                >\n                </twint-payment-actions>\n            {% endblock %}\n            {% block sw_order_detail_twint_transaction_log_card_grid %}\n                <sw-card :title="$tc(\'twint.order.transactionLog.cardTitle\')" class="twint-transaction-log" position-identifier="sw-order-detail-twint">\n                    <template\n                            v-if="(transactionLogs && transactionLogs.total > 0)"\n                            #grid\n                    >\n                        {% block twint_transaction_log_list_content %}\n                            <sw-entity-listing\n                                    class="twint-transaction-logs-grid"\n                                    v-if="transactionLogs"\n                                    :items="transactionLogs"\n                                    :repository="transactionLogRepository"\n                                    :columns="transactionLogColumns"\n                                    :sort-by="sortBy"\n                                    :sort-direction="sortDirection"\n                                    :showSelection="false"\n                                    :allowDelete="false"\n                                    :showDelete="false"\n                                    :isLoading="isLoading"\n                                    @on-add-new-refund="getTransactionLogList">\n\n                                {% block twint_transaction_log_list_content_order %}\n                                    <template #column-orderId="{ item }">\n                                        {% if item.order is not null and item.order.orderNumber is not null %}\n                                            <router-link :to="{ name: \'sw.order.detail\', params: { id: item.orderId }, query: { edit: false } }">\n                                                {{ item.order.orderNumber }}\n                                            </router-link>\n                                        {% else %}\n                                            {{ item.orderId }}\n                                        {% endif %}\n                                        {% if item.order.orderNumber is not empty %}\n                                        xx{{ item.order.orderNumber }}xxx\n                                        {% endif %}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_api_method %}\n                                    <template #column-apiMethod="{ item }">\n                                        <sw-label>{{ item.apiMethod }}</sw-label>\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_soap_action %}\n                                    <template #column-soapAction="{ item }">\n                                        <sw-label v-for="action in item.soapAction">{{ action }}</sw-label>\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_transaction %}\n                                    <template #column-transactionId="{ item }">\n                                        {{ item.transactionId }}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_payment %}\n                                    <template #column-paymentStateId="{ item }">\n                                        {% if item.paymentStateMachineState is not null %}\n                                            <sw-label :variant="getVariantState(\'order_transaction\', item.paymentStateMachineState)" appearance="badged" v-if="item.paymentStateMachineState.name !== \'\'">\n                                                {{ item.paymentStateMachineState.name }}\n                                            </sw-label>\n                                        {% endif %}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_order %}\n                                    <template #column-orderStateId="{ item }">\n                                        {% if item.orderStateMachineState is not null %}\n                                            <sw-label :variant="getVariantState(\'order\', item.orderStateMachineState)" appearance="badged" v-if="item.paymentStateMachineState.name !== \'\'">\n                                                {{ item.orderStateMachineState.name }}\n                                            </sw-label>\n                                        {% endif %}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_created_at %}\n                                    <template #column-createdAt="{ item }">\n                                        {{ dateFilter(item.createdAt) }}\n                                    </template>\n                                {% endblock %}\n\n                                {% block twint_transaction_log_list_content_actions %}\n                                    <template #actions="{ item }">\n                                        {% block twint_transaction_log_list_content_actions_view %}\n                                            <sw-context-menu-item class="twint-transaction-log-grid-btn-view"\n                                                                  @click="onOpenModalDetail(item.id)">\n                                                {{ $tc(\'twint.order.transactionLog.list.columns.action.view\') }}\n                                            </sw-context-menu-item>\n                                        {% endblock %}\n                                    </template>\n                                {% endblock %}\n                                {% block twint_transaction_log_list_content_action_modals %}\n                                    <template #action-modals="{ item }">\n                                        {% block twint_transaction_log_list_content_action_detail_modal %}\n                                            <sw-modal\n                                                    v-if="showTransactionLogDetailModal === item.id"\n                                                    :title="$tc(\'twint.order.transactionLog.list.modal.title\')"\n                                                    variant="large"\n                                                    @modal-close="onCloseModalDetail"\n                                            >\n                                                <div class="sw-data-grid">\n                                                    <table class="sw-data-grid__table">\n                                                        <tbody class="sw-data-grid__body">\n                                                            <tr class="sw-data-grid__row" v-if="item.order.orderNumber !== \'\'">\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.orderID\') }}:</b>\n                                                                    </div>\n                                                                </td>\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        {% if item.order is not null and item.order.orderNumber is not null %}\n                                                                            {{ item.order.orderNumber }}\n                                                                        {% else %}\n                                                                            {{ item.orderId }}\n                                                                        {% endif %}\n                                                                    </div>\n                                                                </td>\n                                                            </tr>\n                                                            <tr class="sw-data-grid__row" v-if="item.apiMethod !== null">\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.apiMethod\') }}:</b>\n                                                                    </div>\n                                                                </td>\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content"> {{ item.apiMethod }}</div>\n                                                                </td>\n                                                            </tr>\n                                                            <tr class="sw-data-grid__row" v-if="item.transactionId !== null">\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.transaction\') }}:</b>\n                                                                    </div>\n                                                                </td>\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content"> {{ item.transactionId }}</div>\n                                                                </td>\n                                                            </tr>\n                                                            <tr class="sw-data-grid__row" v-if="item.paymentStateMachineState.name !== \'\'">\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.payment\') }}:</b>\n                                                                    </div>\n                                                                </td>\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        {% if item.paymentStateMachineState is not null %}\n                                                                            <sw-label :variant="getVariantState(\'order_transaction\', item.paymentStateMachineState)" appearance="badged" v-if="item.paymentStateMachineState.name !== \'\'">\n                                                                                {{ item.paymentStateMachineState.name }}\n                                                                            </sw-label>\n                                                                        {% else %}\n                                                                            {{ item.paymentStateId }}\n                                                                        {% endif %}\n                                                                    </div>\n                                                                </td>\n                                                            </tr>\n                                                            <tr class="sw-data-grid__row" v-if="item.orderStateMachineState.name !== \'\'">\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        <b>{{ $tc(\'twint.order.transactionLog.list.columns.order\') }}:</b>\n                                                                    </div>\n                                                                </td>\n                                                                <td class="sw-data-grid__cell">\n                                                                    <div class="sw-data-grid__cell-content">\n                                                                        {% if item.orderStateMachineState is not null %}\n                                                                            <sw-label :variant="getVariantState(\'order\', item.orderStateMachineState)" appearance="badged"  v-if="item.orderStateMachineState.name !== \'\'">\n                                                                                {{ item.orderStateMachineState.name }}\n                                                                            </sw-label>\n                                                                        {% else %}\n                                                                            {{ item.orderStateId }}\n                                                                        {% endif %}\n                                                                    </div>\n                                                                </td>\n                                                            </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                                {% block twint_transaction_log_list_content_action_detail_modal_order %}\n                                                    <sw-card>\n                                                        <b class="sw-order-detail-twint-modal-soap-request">\n                                                            {{ $tc(\'twint.order.transactionLog.list.columns.request\') }}\n                                                        </b>\n                                                        <sw-textarea-field :disabled="true" :value="item.request" />\n                                                        <b class="sw-order-detail-twint-modal-soap-response">\n                                                            {{ $tc(\'twint.order.transactionLog.list.columns.response\') }}\n                                                        </b>\n                                                        <sw-textarea-field :disabled="true" :value="item.response"/>\n                                                        <div v-if="item.exception != \' \'">\n                                                            <p class="sw-order-detail-twint-modal-exception">\n                                                                <b>{{ $tc(\'twint.order.transactionLog.list.columns.exception\') }}</b>\n                                                            </p>\n                                                            <sw-textarea-field :disabled="true" :value="item.exception"/>\n                                                        </div>\n                                                    </sw-card>\n                                                    <sw-card v-for="(request, index) in item.soapRequest">\n                                                        <sw-container>\n                                                            <h4>{{ item.soapAction[index] }}</h4>\n                                                            <b class="sw-order-detail-twint-modal-soap-request">\n                                                                {{ $tc(\'twint.order.transactionLog.list.columns.soapRequest\') }}\n                                                            </b>\n                                                            <sw-textarea-field :disabled="true" :value="request"/>\n\n                                                            <b class="sw-order-detail-twint-modal-soap-response" v-if="item.soapResponse[index]">\n                                                                {{ $tc(\'twint.order.transactionLog.list.columns.soapResponse\') }}\n                                                            </b>\n                                                            <sw-textarea-field  v-if="item.soapResponse[index]" :disabled="true" :value="item.soapResponse[index]"/>\n                                                        </sw-container>\n                                                    </sw-card>\n                                                {% endblock %}\n\n                                                {% block twint_transaction_log_list_content_action_detail_modal_footer %}\n                                                    <template #modal-footer>\n                                                        {% block twint_transaction_log_list_content_action_detail_modal_close %}\n                                                            <sw-button size="small" @click="onCloseModalDetail">\n                                                                {{ $tc(\'twint.order.transactionLog.list.modal.close\') }}\n                                                            </sw-button>\n                                                        {% endblock %}\n                                                    </template>\n                                                {% endblock %}\n                                            </sw-modal>\n                                        {% endblock %}\n                                    </template>\n                                {% endblock %}\n                            </sw-entity-listing>\n                        {% endblock %}\n                    </template>\n                </sw-card>\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    </div>\n{% endblock %}\n',mixins:[dt.getByName("notification"),dt.getByName("listing")],inject:["repositoryFactory","acl","stateStyleDataProviderService"],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{isLoading:!1,transactionLogs:null,refundedAmount:0,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0,showTransactionLogDetailModal:!1}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.isLoading=!0,this.getTransactionLogList(),this.$root.$on("refund-finish",this.getTransactionLogList)},getTransactionLogList:function(){var t=this;this.naturalSorting="createdAt"===this.sortBy;var e=new ft;e.addSorting(ft.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e.addAssociation("order"),e.addAssociation("paymentStateMachineState"),e.addAssociation("orderStateMachineState"),e.addFilter(ft.equals("orderId",this.orderId)),this.isLoading=!0,this.transactionLogRepository.search(e).then((function(e){e.forEach((function(t,n){void 0===t.order&&(e[n].order={orderNumber:""}),void 0===t.paymentStateMachineState&&(e[n].paymentStateMachineState={name:""}),void 0===t.orderStateMachineState&&(e[n].orderStateMachineState={name:""})})),t.transactionLogs=e,window.a=e,t.isLoading=!1})).catch((function(){t.isLoading=!1}))},onOpenModalDetail:function(t){this.showTransactionLogDetailModal=t},onCloseModalDetail:function(){this.showTransactionLogDetailModal=!1},getVariantState:function(t,e){if(e)return this.stateStyleDataProviderService.getStyle("".concat(t,".state"),e.technicalName).variant}},destroyed:function(){this.$root.$off("refund-finish")},computed:st(st({},mt("swOrderDetail",["order","versionContext","orderAddressIds","editing","loading"])),{},{orderId:function(){return this.$route.params.id},transactionLogRepository:function(){return this.repositoryFactory.create("twint_transaction_log")},totalTransactionLogs:function(){return this.transactionLogs.length},transactionLogColumns:function(){var t=ut.getApplicationRoot();return t?[{property:"orderId",label:t.$tc("twint.order.transactionLog.list.columns.orderID"),allowResize:!0},{property:"apiMethod",label:t.$tc("twint.order.transactionLog.list.columns.apiMethod"),allowResize:!0},{property:"soapAction",label:t.$tc("twint.order.transactionLog.list.columns.soapAction"),allowResize:!0},{property:"paymentStateId",label:t.$tc("twint.order.transactionLog.list.columns.payment"),allowResize:!0,sortable:!1},{property:"orderStateId",label:t.$tc("twint.order.transactionLog.list.columns.order"),allowResize:!0,align:"center"},{property:"createdAt",label:t.$tc("twint.order.transactionLog.list.columns.createdAt"),allowResize:!0}]:[]},dateFilter:function(){return Shopware.Filter.getByName("date")}})}),Shopware.Module.register("twint-sw-order-detail",{type:"plugin",name:"twint",title:"twint.name",description:"twint.pluginDescription",version:"1.0.0",targetVersion:"1.0.0",color:"#333",icon:"default-action-settings",routeMiddleware:function(t,e){"sw.order.detail"===e.name&&e.children.push({name:"sw.order.detail.twint",path:"/sw/order/detail/:id/twint",component:"sw-order-detail-twint",meta:{parentPath:"sw.order.index"}}),t(e)}});n("uoNK")},P8hj:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,i){c=n,d=i||{};var a=r(t,e);return h(a),function(e){for(var n=[],i=0;i<a.length;i++){var s=a[i];(l=o[s.id]).refs--,n.push(l)}e?h(a=r(t,e)):a=[];for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete o[l.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(v(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(v(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function v(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(p){var i=l++;r=s||(s=g()),e=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=g(),e=_.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var w,y=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function b(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function _(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),d.ssrId&&t.setAttribute(f,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},fKsf:function(t,e,n){var r=n("FUWB");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("1c8c6fb8",r,!0,{})},iZjG:function(t,e){var n=Shopware.Data.Criteria;Shopware.Component.override("sw-order-create-options",{computed:{paymentMethodCriteria:function(){var t=new n;return t.addFilter(n.equals("active",1)),this.salesChannelId&&t.addFilter(n.equals("salesChannels.id",this.salesChannelId)),t.addFilter(n.not("AND",[n.contains("handlerIdentifier","Twint")])),t}}})},ncrE:function(t,e,n){},oGfU:function(t,e,n){},uoNK:function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=Shopware.Data.Criteria;Shopware.Component.override("sw-settings-custom-field-set-list",{inject:["acl","feature"],data:function(){return{twintCustomFieldSetName:"twint_payment_custom_field_set"}},computed:{listingCriteria:function(){var t=new i(this.page,this.limit),e=this.getMainListingParams();return t.addFilter(i.multi("OR",[].concat(n(this.getLocaleCriterias(e.term)),n(this.getTermCriteria(e.term))))),t.addFilter(i.equals("appId",null)),t.addFilter(i.not("AND",[i.equals("name",this.twintCustomFieldSetName)])),t}}})},yMVt:function(t,e,n){var r=n("oGfU");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("P8hj").default)("a386577a",r,!0,{})}});
//# sourceMappingURL=twint-payment.js.map
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["twint-payment"],{4529:(e,t,o)=>{var r,i,n,a=o(6285),l=o(3206),s=o(8254);o(4690);class p extends a.Z{init(){this.httpClient=new s.Z,this.pageSelector=l.Z.querySelector(document,this.options.pageSelector),this.appSelector=l.Z.querySelector(document,this.options.appSelector),this.qrCodeSelector=l.Z.querySelector(document,this.options.qrCodeSelector),this.appLinkSelector=l.Z.querySelector(document,this.options.appLinkSelector),this.bankSelectors=l.Z.querySelectorAll(this.appSelector,".bank-logo",!1),this.orderNumber=this.pageSelector.getAttribute("data-order-number"),this.isMobile=this.pageSelector.getAttribute("data-mobile"),this.statusOrderEndpoint="/payment/order/"+this.orderNumber,this._registerEvents()}_registerEvents(){this.bankSelectors&&this.bankSelectors.forEach((e=>{e.addEventListener("click",(t=>{this.onClickBank(t,e)}))})),this.appLinkSelector&&this.appLinkSelector.addEventListener("change",this.onChangeAppList.bind(this));var e=localStorage.getItem(this.options.lastReloadTimeKey),t=Date.now(),o=1e3*this.options.intervalCheck;(!e||t-e>o)&&this.reloadPage(this),this.reloadPageInterval=setInterval((()=>{this.reloadPage(this)}),o),this.isMobile&&(this.countDownInterval=setInterval((()=>{this.appCountDown(this)}),1e3*this.options.appCountDownInterval))}onClickBank(e,t){e.preventDefault();var o=t.getAttribute("data-link");o&&(window.location=o)}onChangeAppList(e){const t=e.target;let o=t.options[t.selectedIndex].value;o&&(window.location=o)}reloadPage(){localStorage.setItem(this.options.lastReloadTimeKey,Date.now()),this.httpClient.get(this.statusOrderEndpoint,(e=>{try{const t=JSON.parse(e);"boolean"==typeof t.reload&&t.reload&&(clearInterval(this.reloadPageInterval),location.reload())}catch(e){}}),"application/json",!0)}appCountDown(){this.qrCodeSelector.style.display="block",clearInterval(this.countDownInterval)}}r=p,n={pageSelector:".qr-waiting-container",appSelector:"#logo-container",appLinkSelector:"#app-chooser",qrCodeSelector:".qr-code-mobile",lastReloadTimeKey:"lastReloadTime",appCountDownInterval:10,intervalCheck:10},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i="options"))in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n;window.PluginManager.register("AppSwitchHandler",p,"[data-app-selector]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=4529,e(e.s=t);var t}));e.O()}]);